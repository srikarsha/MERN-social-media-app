{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Provider}from\"react-redux\";import createAppStore from\"./redux/store\";import axios from\"axios\";import CommonLoading from\"./components/loader/CommonLoading\";import App from\"./App\";import{getTitleFromRoute}from\"./utils/docTitle\";import{Helmet}from\"react-helmet\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ErrorComponent=function ErrorComponent(_ref){var errorMessage=_ref.errorMessage;return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 font-bold text-center\",children:errorMessage});};var AppContainer=function AppContainer(){var location=useLocation();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),store=_useState2[0],setStore=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var checkServerStatus=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/server-status\");case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);setError(\"Server is down. Please try again later.\");case 8:_context.prev=8;setLoading(false);return _context.finish(8);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,5,8,11]]);}));return function checkServerStatus(){return _ref2.apply(this,arguments);};}();checkServerStatus();},[]);// Asynchronously initialize the Redux store, including data fetching and authentication,\n// while displaying a loading indicator. Making sure that the store is initialized with credentials and data before rendering the app.\nuseEffect(function(){var initializeStore=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var appStore;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return createAppStore();case 3:appStore=_context2.sent;setStore(appStore);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);setError(\"Error initializing the app: \".concat(_context2.t0.message));case 10:_context2.prev=10;setLoading(false);return _context2.finish(10);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,7,10,13]]);}));return function initializeStore(){return _ref3.apply(this,arguments);};}();initializeStore();},[]);if(loading||error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:loading?/*#__PURE__*/_jsx(CommonLoading,{}):/*#__PURE__*/_jsx(ErrorComponent,{errorMessage:error})});}return/*#__PURE__*/_jsxs(Provider,{store:store,children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:getTitleFromRoute(location.pathname)})}),/*#__PURE__*/_jsx(App,{})]});};export default AppContainer;","map":{"version":3,"names":["useState","useEffect","Provider","createAppStore","axios","CommonLoading","App","getTitleFromRoute","Helmet","useLocation","jsx","_jsx","jsxs","_jsxs","ErrorComponent","_ref","errorMessage","className","children","AppContainer","location","_useState","_useState2","_slicedToArray","store","setStore","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","checkServerStatus","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","t0","finish","stop","apply","arguments","initializeStore","_ref3","_callee2","appStore","_callee2$","_context2","sent","concat","message","pathname"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/AppContainer.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Provider } from \"react-redux\";\nimport createAppStore from \"./redux/store\";\nimport axios from \"axios\";\nimport CommonLoading from \"./components/loader/CommonLoading\";\nimport App from \"./App\";\nimport { getTitleFromRoute } from \"./utils/docTitle\";\nimport { Helmet } from \"react-helmet\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ErrorComponent = ({ errorMessage }) => (\n  <div className=\"text-red-500 font-bold text-center\">{errorMessage}</div>\n);\n\nconst AppContainer = () => {\n  const location = useLocation();\n  const [store, setStore] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const checkServerStatus = async () => {\n      try {\n        await axios.get(\"/server-status\");\n      } catch (err) {\n        setError(\"Server is down. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkServerStatus();\n  }, []);\n\n  // Asynchronously initialize the Redux store, including data fetching and authentication,\n  // while displaying a loading indicator. Making sure that the store is initialized with credentials and data before rendering the app.\n\n  useEffect(() => {\n    const initializeStore = async () => {\n      try {\n        const appStore = await createAppStore();\n        setStore(appStore);\n      } catch (err) {\n        setError(`Error initializing the app: ${err.message}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeStore();\n  }, []);\n\n  if (loading || error) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        {loading ? <CommonLoading /> : <ErrorComponent errorMessage={error} />}\n      </div>\n    );\n  }\n\n  return (\n    <Provider store={store}>\n      <Helmet>\n        <title>{getTitleFromRoute(location.pathname)}</title>\n      </Helmet>\n      <App />\n    </Provider>\n  );\n};\n\nexport default AppContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}