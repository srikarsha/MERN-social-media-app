{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect}from\"react\";import{Dialog,Transition}from\"@headlessui/react\";import{Fragment,useRef,useState,memo}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{joinCommunityAndFetchData}from\"../../redux/actions/communityActions\";import{IoIosPeople}from\"react-icons/io\";import LoadingSpinner from\"../loader/ButtonLoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var JoinModal=/*#__PURE__*/memo(function(_ref){var show=_ref.show,onClose=_ref.onClose,community=_ref.community;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var userData=useSelector(function(state){var _state$auth;return(_state$auth=state.auth)===null||_state$auth===void 0?void 0:_state$auth.userData;});var cancelButtonRef=useRef(null);var joinCommunityHandler=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(communityName){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return dispatch(joinCommunityAndFetchData(communityName,userData));case 4:_context.prev=4;setLoading(false);onClose();return _context.finish(4);case 8:case\"end\":return _context.stop();}},_callee,null,[[0,,4,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}(),[dispatch,userData,onClose]);useEffect(function(){if(!loading){setLoading(false);}},[loading]);return/*#__PURE__*/_jsx(Transition,{appear:true,show:show,as:Fragment,children:/*#__PURE__*/_jsxs(Dialog,{as:\"div\",className:\"relative z-50\",onClose:onClose,initialFocus:cancelButtonRef,children:[/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0\",enterTo:\"opacity-100\",leave:\"ease-in duration-200\",leaveFrom:\"opacity-100\",leaveTo:\"opacity-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-25\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 overflow-y-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full items-center justify-center p-4 text-center\",children:/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0 scale-95\",enterTo:\"opacity-100 scale-100\",leave:\"ease-in duration-200\",leaveFrom:\"opacity-100 scale-100\",leaveTo:\"opacity-0 scale-95\",children:/*#__PURE__*/_jsxs(Dialog.Panel,{className:\"flex w-full max-w-md transform flex-col items-center overflow-hidden rounded-md bg-white p-6 text-left align-middle shadow-xl transition-all\",children:[/*#__PURE__*/_jsxs(Dialog.Title,{as:\"h3\",className:\"flex items-center gap-2 text-xl font-medium leading-6 text-primary\",children:[/*#__PURE__*/_jsx(IoIosPeople,{className:\"text-base text-primary md:text-xl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[community.name,/*#__PURE__*/_jsx(\"p\",{className:\"absolute -right-4 -top-3 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-xs text-white\",children:community.members.length})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm text-gray-700 md:text-base\",children:\"Are you sure you want to join this community? You can always leave later.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 px-4 py-3 sm:flex sm:px-6 md:flex-row md:gap-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm\",onClick:onClose,ref:cancelButtonRef,disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,type:\"button\",className:\"inline-flex justify-center rounded-md border px-4 py-2 text-sm font-medium \".concat(loading?\"cursor-not-allowed bg-blue-500 text-white\":\"border-transparent bg-blue-500 text-white hover:bg-blue-600\",\" focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2\"),onClick:function onClick(){return joinCommunityHandler(community.name);},children:loading?/*#__PURE__*/_jsx(LoadingSpinner,{loadingText:\"Joining...\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Join\"})})]})]})})})})]})});});export default JoinModal;","map":{"version":3,"names":["useCallback","useEffect","Dialog","Transition","Fragment","useRef","useState","memo","useSelector","useDispatch","joinCommunityAndFetchData","IoIosPeople","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","JoinModal","_ref","show","onClose","community","dispatch","_useState","_useState2","_slicedToArray","loading","setLoading","userData","state","_state$auth","auth","cancelButtonRef","joinCommunityHandler","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","communityName","wrap","_callee$","_context","prev","next","finish","stop","_x","apply","arguments","appear","as","children","className","initialFocus","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Panel","Title","name","members","length","type","onClick","ref","disabled","concat","loadingText"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/modals/JoinModal.jsx"],"sourcesContent":["import { useCallback, useEffect } from \"react\";\nimport { Dialog, Transition } from \"@headlessui/react\";\nimport { Fragment, useRef, useState, memo } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { joinCommunityAndFetchData } from \"../../redux/actions/communityActions\";\nimport { IoIosPeople } from \"react-icons/io\";\nimport LoadingSpinner from \"../loader/ButtonLoadingSpinner\";\n\nconst JoinModal = memo(({ show, onClose, community }) => {\n  const dispatch = useDispatch();\n\n  const [loading, setLoading] = useState(false);\n\n  const userData = useSelector((state) => state.auth?.userData);\n\n  const cancelButtonRef = useRef(null);\n\n  const joinCommunityHandler = useCallback(\n    async (communityName) => {\n      try {\n        setLoading(true);\n        await dispatch(joinCommunityAndFetchData(communityName, userData));\n      } finally {\n        setLoading(false);\n        onClose();\n      }\n    },\n    [dispatch, userData, onClose]\n  );\n\n  useEffect(() => {\n    if (!loading) {\n      setLoading(false);\n    }\n  }, [loading]);\n\n  return (\n    <Transition appear show={show} as={Fragment}>\n      <Dialog\n        as=\"div\"\n        className=\"relative z-50\"\n        onClose={onClose}\n        initialFocus={cancelButtonRef}\n      >\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black bg-opacity-25\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"flex w-full max-w-md transform flex-col items-center overflow-hidden rounded-md bg-white p-6 text-left align-middle shadow-xl transition-all\">\n                <Dialog.Title\n                  as=\"h3\"\n                  className=\"flex items-center gap-2 text-xl font-medium leading-6 text-primary\"\n                >\n                  <IoIosPeople className=\"text-base text-primary md:text-xl\" />\n                  <div className=\"relative\">\n                    {community.name}\n                    <p className=\"absolute -right-4 -top-3 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-xs text-white\">\n                      {community.members.length}\n                    </p>\n                  </div>\n                </Dialog.Title>\n                <div className=\"mt-2\">\n                  <p className=\"text-center text-sm text-gray-700 md:text-base\">\n                    Are you sure you want to join this community? You can always\n                    leave later.\n                  </p>\n                </div>\n\n                <div className=\"flex flex-col gap-2 px-4 py-3 sm:flex sm:px-6 md:flex-row md:gap-6\">\n                  <button\n                    type=\"button\"\n                    className=\"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm\"\n                    onClick={onClose}\n                    ref={cancelButtonRef}\n                    disabled={loading}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    disabled={loading}\n                    type=\"button\"\n                    className={`inline-flex justify-center rounded-md border px-4 py-2 text-sm font-medium ${\n                      loading\n                        ? \"cursor-not-allowed bg-blue-500 text-white\"\n                        : \"border-transparent bg-blue-500 text-white hover:bg-blue-600\"\n                    } focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2`}\n                    onClick={() => joinCommunityHandler(community.name)}\n                  >\n                    {loading ? (\n                      <LoadingSpinner loadingText={\"Joining...\"} />\n                    ) : (\n                      <span>Join</span>\n                    )}\n                  </button>\n                </div>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n});\n\nexport default JoinModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}