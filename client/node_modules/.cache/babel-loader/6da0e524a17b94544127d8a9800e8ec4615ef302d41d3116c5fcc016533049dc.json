{"ast":null,"code":"import _objectSpread from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import*as types from\"../constants/authConstants\";import{GET_COMMUNITY_SUCCESS,GET_COMMUNITY_FAIL}from\"../constants/communityConstants\";var initialState={userData:null,refreshToken:null,accessToken:null,signInError:null,signUpError:[],successMessage:null,isModeratorOfThisCommunity:false,contextAuthData:null,trustedAuthContextData:[],blockedAuthContextData:[],userPreferences:null,contextAuthError:null};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload;switch(type){case types.SET_ACCESS_TOKEN:return _objectSpread(_objectSpread({},state),{},{accessToken:payload?payload:null});case types.SET_REFRESH_TOKEN:return _objectSpread(_objectSpread({},state),{},{refreshToken:payload?payload:null});case types.SET_USER_DATA:return _objectSpread(_objectSpread({},state),{},{userData:payload?payload:null});case types.SIGNUP_SUCCESS:return _objectSpread(_objectSpread({},state),{},{signInError:null,signUpError:[],successMessage:payload?payload:null});case types.SIGNUP_FAIL:return _objectSpread(_objectSpread({},state),{},{successMessage:null,signInError:null,signUpError:payload?payload:[]});case types.SIGNIN_SUCCESS:return _objectSpread(_objectSpread({},state),{},{userData:payload?payload.user:null,accessToken:payload?payload.accessToken:null,refreshToken:payload?payload.refreshToken:null,signInError:null,successMessage:payload?payload:null});case types.SIGNIN_FAIL:return _objectSpread(_objectSpread({},state),{},{successMessage:null,signUpError:[],signInError:payload?payload:null});case types.LOGOUT:return _objectSpread(_objectSpread({},state),{},{userData:null,refreshToken:null,accessToken:null,signInError:null,signUpError:[],successMessage:null,isModeratorOfThisCommunity:false});case types.REFRESH_TOKEN_SUCCESS:return _objectSpread(_objectSpread({},state),{},{accessToken:payload?payload.accessToken:null,refreshToken:payload?payload.refreshToken:null});case types.REFRESH_TOKEN_FAIL:return _objectSpread(_objectSpread({},state),{},{userData:null,refreshToken:null,accessToken:null,signUpError:[],signInError:null,successMessage:null,isModeratorOfThisCommunity:false});case GET_COMMUNITY_SUCCESS:var moderators=payload?payload.moderators:[];var isModeratorOfThisCommunity=moderators.some(function(moderator){var _state$userData;return moderator===((_state$userData=state.userData)===null||_state$userData===void 0?void 0:_state$userData._id);});return _objectSpread(_objectSpread({},state),{},{isModeratorOfThisCommunity:isModeratorOfThisCommunity});case GET_COMMUNITY_FAIL:return _objectSpread(_objectSpread({},state),{},{isModeratorOfThisCommunity:false});case types.GET_CONTEXT_AUTH_DATA_SUCCESS:return _objectSpread(_objectSpread({},state),{},{contextAuthData:payload?payload:null,contextAuthError:null});case types.GET_CONTEXT_AUTH_DATA_FAIL:return _objectSpread(_objectSpread({},state),{},{contextAuthData:null,contextAuthError:payload?payload:null});case types.GET_TRUSTED_AUTH_CONTEXT_DATA_SUCCESS:return _objectSpread(_objectSpread({},state),{},{trustedAuthContextData:payload?payload:[],contextAuthError:null});case types.GET_TRUSTED_AUTH_CONTEXT_DATA_FAIL:return _objectSpread(_objectSpread({},state),{},{trustedAuthContextData:[],contextAuthError:payload?payload:null});case types.GET_USER_PREFERENCES_SUCCESS:return _objectSpread(_objectSpread({},state),{},{userPreferences:payload?payload:null,contextAuthError:null});case types.GET_USER_PREFERENCES_FAIL:return _objectSpread(_objectSpread({},state),{},{userPreferences:null,contextAuthError:payload?payload:null});case types.GET_BLOCKED_AUTH_CONTEXT_DATA_SUCCESS:return _objectSpread(_objectSpread({},state),{},{blockedAuthContextData:payload?payload:[],contextAuthError:null});case types.GET_BLOCKED_AUTH_CONTEXT_DATA_FAIL:return _objectSpread(_objectSpread({},state),{},{blockedAuthContextData:[],contextAuthError:payload?payload:null});case types.DELETE_CONTEXT_AUTH_DATA_FAIL:case types.UNBLOCK_CONTEXT_AUTH_DATA_FAIL:case types.BLOCK_CONTEXT_AUTH_DATA_FAIL:return _objectSpread(_objectSpread({},state),{},{contextAuthError:payload?payload:null});case types.CLEAR_MESSAGE:return _objectSpread(_objectSpread({},state),{},{successMessage:null,signInError:null,signUpError:[]});default:return state;}};export default authReducer;","map":{"version":3,"names":["types","GET_COMMUNITY_SUCCESS","GET_COMMUNITY_FAIL","initialState","userData","refreshToken","accessToken","signInError","signUpError","successMessage","isModeratorOfThisCommunity","contextAuthData","trustedAuthContextData","blockedAuthContextData","userPreferences","contextAuthError","authReducer","state","arguments","length","undefined","action","type","payload","SET_ACCESS_TOKEN","_objectSpread","SET_REFRESH_TOKEN","SET_USER_DATA","SIGNUP_SUCCESS","SIGNUP_FAIL","SIGNIN_SUCCESS","user","SIGNIN_FAIL","LOGOUT","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAIL","moderators","some","moderator","_state$userData","_id","GET_CONTEXT_AUTH_DATA_SUCCESS","GET_CONTEXT_AUTH_DATA_FAIL","GET_TRUSTED_AUTH_CONTEXT_DATA_SUCCESS","GET_TRUSTED_AUTH_CONTEXT_DATA_FAIL","GET_USER_PREFERENCES_SUCCESS","GET_USER_PREFERENCES_FAIL","GET_BLOCKED_AUTH_CONTEXT_DATA_SUCCESS","GET_BLOCKED_AUTH_CONTEXT_DATA_FAIL","DELETE_CONTEXT_AUTH_DATA_FAIL","UNBLOCK_CONTEXT_AUTH_DATA_FAIL","BLOCK_CONTEXT_AUTH_DATA_FAIL","CLEAR_MESSAGE"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/redux/reducers/auth.js"],"sourcesContent":["import * as types from \"../constants/authConstants\";\nimport {\n  GET_COMMUNITY_SUCCESS,\n  GET_COMMUNITY_FAIL,\n} from \"../constants/communityConstants\";\n\nconst initialState = {\n  userData: null,\n  refreshToken: null,\n  accessToken: null,\n  signInError: null,\n  signUpError: [],\n  successMessage: null,\n  isModeratorOfThisCommunity: false,\n  contextAuthData: null,\n  trustedAuthContextData: [],\n  blockedAuthContextData: [],\n  userPreferences: null,\n  contextAuthError: null,\n};\n\nconst authReducer = (state = initialState, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case types.SET_ACCESS_TOKEN:\n      return {\n        ...state,\n        accessToken: payload ? payload : null,\n      };\n    case types.SET_REFRESH_TOKEN:\n      return {\n        ...state,\n        refreshToken: payload ? payload : null,\n      };\n    case types.SET_USER_DATA:\n      return {\n        ...state,\n        userData: payload ? payload : null,\n      };\n\n    case types.SIGNUP_SUCCESS:\n      return {\n        ...state,\n        signInError: null,\n        signUpError: [],\n        successMessage: payload ? payload : null,\n      };\n\n    case types.SIGNUP_FAIL:\n      return {\n        ...state,\n        successMessage: null,\n        signInError: null,\n        signUpError: payload ? payload : [],\n      };\n\n    case types.SIGNIN_SUCCESS:\n      return {\n        ...state,\n        userData: payload ? payload.user : null,\n        accessToken: payload ? payload.accessToken : null,\n        refreshToken: payload ? payload.refreshToken : null,\n        signInError: null,\n        successMessage: payload ? payload : null,\n      };\n\n    case types.SIGNIN_FAIL:\n      return {\n        ...state,\n        successMessage: null,\n        signUpError: [],\n        signInError: payload ? payload : null,\n      };\n\n    case types.LOGOUT:\n      return {\n        ...state,\n        userData: null,\n        refreshToken: null,\n        accessToken: null,\n        signInError: null,\n        signUpError: [],\n        successMessage: null,\n        isModeratorOfThisCommunity: false,\n      };\n\n    case types.REFRESH_TOKEN_SUCCESS:\n      return {\n        ...state,\n        accessToken: payload ? payload.accessToken : null,\n        refreshToken: payload ? payload.refreshToken : null,\n      };\n\n    case types.REFRESH_TOKEN_FAIL:\n      return {\n        ...state,\n        userData: null,\n        refreshToken: null,\n        accessToken: null,\n        signUpError: [],\n        signInError: null,\n        successMessage: null,\n        isModeratorOfThisCommunity: false,\n      };\n\n    case GET_COMMUNITY_SUCCESS:\n      const moderators = payload ? payload.moderators : [];\n      const isModeratorOfThisCommunity = moderators.some(\n        (moderator) => moderator === state.userData?._id\n      );\n      return {\n        ...state,\n        isModeratorOfThisCommunity,\n      };\n\n    case GET_COMMUNITY_FAIL:\n      return {\n        ...state,\n        isModeratorOfThisCommunity: false,\n      };\n\n    case types.GET_CONTEXT_AUTH_DATA_SUCCESS:\n      return {\n        ...state,\n        contextAuthData: payload ? payload : null,\n        contextAuthError: null,\n      };\n\n    case types.GET_CONTEXT_AUTH_DATA_FAIL:\n      return {\n        ...state,\n        contextAuthData: null,\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.GET_TRUSTED_AUTH_CONTEXT_DATA_SUCCESS:\n      return {\n        ...state,\n        trustedAuthContextData: payload ? payload : [],\n        contextAuthError: null,\n      };\n\n    case types.GET_TRUSTED_AUTH_CONTEXT_DATA_FAIL:\n      return {\n        ...state,\n        trustedAuthContextData: [],\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.GET_USER_PREFERENCES_SUCCESS:\n      return {\n        ...state,\n        userPreferences: payload ? payload : null,\n        contextAuthError: null,\n      };\n\n    case types.GET_USER_PREFERENCES_FAIL:\n      return {\n        ...state,\n        userPreferences: null,\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.GET_BLOCKED_AUTH_CONTEXT_DATA_SUCCESS:\n      return {\n        ...state,\n        blockedAuthContextData: payload ? payload : [],\n        contextAuthError: null,\n      };\n\n    case types.GET_BLOCKED_AUTH_CONTEXT_DATA_FAIL:\n      return {\n        ...state,\n        blockedAuthContextData: [],\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.DELETE_CONTEXT_AUTH_DATA_FAIL:\n    case types.UNBLOCK_CONTEXT_AUTH_DATA_FAIL:\n    case types.BLOCK_CONTEXT_AUTH_DATA_FAIL:\n      return {\n        ...state,\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.CLEAR_MESSAGE:\n      return {\n        ...state,\n        successMessage: null,\n        signInError: null,\n        signUpError: [],\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;\n"],"mappings":"yIAAA,MAAO,GAAK,CAAAA,KAAK,KAAM,4BAA4B,CACnD,OACEC,qBAAqB,CACrBC,kBAAkB,KACb,iCAAiC,CAExC,GAAM,CAAAC,YAAY,CAAG,CACnBC,QAAQ,CAAE,IAAI,CACdC,YAAY,CAAE,IAAI,CAClBC,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,IAAI,CACpBC,0BAA0B,CAAE,KAAK,CACjCC,eAAe,CAAE,IAAI,CACrBC,sBAAsB,CAAE,EAAE,CAC1BC,sBAAsB,CAAE,EAAE,CAC1BC,eAAe,CAAE,IAAI,CACrBC,gBAAgB,CAAE,IACpB,CAAC,CAED,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAqC,IAAjC,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGf,YAAY,IAAE,CAAAkB,MAAM,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAC/C,GAAQ,CAAAE,IAAI,CAAcD,MAAM,CAAxBC,IAAI,CAAEC,OAAO,CAAKF,MAAM,CAAlBE,OAAO,CAErB,OAAQD,IAAI,EACV,IAAK,CAAAtB,KAAK,CAACwB,gBAAgB,CACzB,OAAAC,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRX,WAAW,CAAEiB,OAAO,CAAGA,OAAO,CAAG,IAAI,GAEzC,IAAK,CAAAvB,KAAK,CAAC0B,iBAAiB,CAC1B,OAAAD,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRZ,YAAY,CAAEkB,OAAO,CAAGA,OAAO,CAAG,IAAI,GAE1C,IAAK,CAAAvB,KAAK,CAAC2B,aAAa,CACtB,OAAAF,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRb,QAAQ,CAAEmB,OAAO,CAAGA,OAAO,CAAG,IAAI,GAGtC,IAAK,CAAAvB,KAAK,CAAC4B,cAAc,CACvB,OAAAH,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRV,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAEc,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG5C,IAAK,CAAAvB,KAAK,CAAC6B,WAAW,CACpB,OAAAJ,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRR,cAAc,CAAE,IAAI,CACpBF,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAEe,OAAO,CAAGA,OAAO,CAAG,EAAE,GAGvC,IAAK,CAAAvB,KAAK,CAAC8B,cAAc,CACvB,OAAAL,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRb,QAAQ,CAAEmB,OAAO,CAAGA,OAAO,CAACQ,IAAI,CAAG,IAAI,CACvCzB,WAAW,CAAEiB,OAAO,CAAGA,OAAO,CAACjB,WAAW,CAAG,IAAI,CACjDD,YAAY,CAAEkB,OAAO,CAAGA,OAAO,CAAClB,YAAY,CAAG,IAAI,CACnDE,WAAW,CAAE,IAAI,CACjBE,cAAc,CAAEc,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG5C,IAAK,CAAAvB,KAAK,CAACgC,WAAW,CACpB,OAAAP,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRR,cAAc,CAAE,IAAI,CACpBD,WAAW,CAAE,EAAE,CACfD,WAAW,CAAEgB,OAAO,CAAGA,OAAO,CAAG,IAAI,GAGzC,IAAK,CAAAvB,KAAK,CAACiC,MAAM,CACf,OAAAR,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRb,QAAQ,CAAE,IAAI,CACdC,YAAY,CAAE,IAAI,CAClBC,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,IAAI,CACpBC,0BAA0B,CAAE,KAAK,GAGrC,IAAK,CAAAV,KAAK,CAACkC,qBAAqB,CAC9B,OAAAT,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRX,WAAW,CAAEiB,OAAO,CAAGA,OAAO,CAACjB,WAAW,CAAG,IAAI,CACjDD,YAAY,CAAEkB,OAAO,CAAGA,OAAO,CAAClB,YAAY,CAAG,IAAI,GAGvD,IAAK,CAAAL,KAAK,CAACmC,kBAAkB,CAC3B,OAAAV,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRb,QAAQ,CAAE,IAAI,CACdC,YAAY,CAAE,IAAI,CAClBC,WAAW,CAAE,IAAI,CACjBE,WAAW,CAAE,EAAE,CACfD,WAAW,CAAE,IAAI,CACjBE,cAAc,CAAE,IAAI,CACpBC,0BAA0B,CAAE,KAAK,GAGrC,IAAK,CAAAT,qBAAqB,CACxB,GAAM,CAAAmC,UAAU,CAAGb,OAAO,CAAGA,OAAO,CAACa,UAAU,CAAG,EAAE,CACpD,GAAM,CAAA1B,0BAA0B,CAAG0B,UAAU,CAACC,IAAI,CAChD,SAACC,SAAS,MAAAC,eAAA,OAAK,CAAAD,SAAS,KAAAC,eAAA,CAAKtB,KAAK,CAACb,QAAQ,UAAAmC,eAAA,iBAAdA,eAAA,CAAgBC,GAAG,GAClD,CAAC,CACD,OAAAf,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRP,0BAA0B,CAA1BA,0BAA0B,GAG9B,IAAK,CAAAR,kBAAkB,CACrB,OAAAuB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRP,0BAA0B,CAAE,KAAK,GAGrC,IAAK,CAAAV,KAAK,CAACyC,6BAA6B,CACtC,OAAAhB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRN,eAAe,CAAEY,OAAO,CAAGA,OAAO,CAAG,IAAI,CACzCR,gBAAgB,CAAE,IAAI,GAG1B,IAAK,CAAAf,KAAK,CAAC0C,0BAA0B,CACnC,OAAAjB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRN,eAAe,CAAE,IAAI,CACrBI,gBAAgB,CAAEQ,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG9C,IAAK,CAAAvB,KAAK,CAAC2C,qCAAqC,CAC9C,OAAAlB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRL,sBAAsB,CAAEW,OAAO,CAAGA,OAAO,CAAG,EAAE,CAC9CR,gBAAgB,CAAE,IAAI,GAG1B,IAAK,CAAAf,KAAK,CAAC4C,kCAAkC,CAC3C,OAAAnB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRL,sBAAsB,CAAE,EAAE,CAC1BG,gBAAgB,CAAEQ,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG9C,IAAK,CAAAvB,KAAK,CAAC6C,4BAA4B,CACrC,OAAApB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRH,eAAe,CAAES,OAAO,CAAGA,OAAO,CAAG,IAAI,CACzCR,gBAAgB,CAAE,IAAI,GAG1B,IAAK,CAAAf,KAAK,CAAC8C,yBAAyB,CAClC,OAAArB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRH,eAAe,CAAE,IAAI,CACrBC,gBAAgB,CAAEQ,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG9C,IAAK,CAAAvB,KAAK,CAAC+C,qCAAqC,CAC9C,OAAAtB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRJ,sBAAsB,CAAEU,OAAO,CAAGA,OAAO,CAAG,EAAE,CAC9CR,gBAAgB,CAAE,IAAI,GAG1B,IAAK,CAAAf,KAAK,CAACgD,kCAAkC,CAC3C,OAAAvB,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRJ,sBAAsB,CAAE,EAAE,CAC1BE,gBAAgB,CAAEQ,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG9C,IAAK,CAAAvB,KAAK,CAACiD,6BAA6B,CACxC,IAAK,CAAAjD,KAAK,CAACkD,8BAA8B,CACzC,IAAK,CAAAlD,KAAK,CAACmD,4BAA4B,CACrC,OAAA1B,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRF,gBAAgB,CAAEQ,OAAO,CAAGA,OAAO,CAAG,IAAI,GAG9C,IAAK,CAAAvB,KAAK,CAACoD,aAAa,CACtB,OAAA3B,aAAA,CAAAA,aAAA,IACKR,KAAK,MACRR,cAAc,CAAE,IAAI,CACpBF,WAAW,CAAE,IAAI,CACjBC,WAAW,CAAE,EAAE,GAGnB,QACE,MAAO,CAAAS,KAAK,CAChB,CACF,CAAC,CAED,cAAe,CAAAD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}