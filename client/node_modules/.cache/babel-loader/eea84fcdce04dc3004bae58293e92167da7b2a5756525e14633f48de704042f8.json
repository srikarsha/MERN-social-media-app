{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{getTrustedContextAuthDataAction,getBlockedAuthContextDataAction,unblockContextAuthDataAction}from\"../../redux/actions/authActions\";import LoadingSpinner from\"../loader/ButtonLoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BlockedDevicesLocations=function BlockedDevicesLocations(_ref){var blockedContextAuthData=_ref.blockedContextAuthData;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var dispatch=useDispatch();var handleUnblock=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(contextId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},contextId,true));});_context.next=3;return dispatch(unblockContextAuthDataAction(contextId));case 3:_context.next=5;return dispatch(getBlockedAuthContextDataAction());case 5:_context.next=7;return dispatch(getTrustedContextAuthDataAction());case 7:setLoading(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},contextId,false));});case 8:case\"end\":return _context.stop();}},_callee);}));return function handleUnblock(_x){return _ref2.apply(this,arguments);};}();var blockedDevices=blockedContextAuthData===null||blockedContextAuthData===void 0?void 0:blockedContextAuthData.map(function(device){return{_id:device._id,device:device.device,deviceType:device.deviceType,ipAddress:device.ip,location:\"\".concat(device.city,\", \").concat(device.country),browser:device.browser,operatingSystem:device.os,time:device.time};});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto mt-12 p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Blocked Devices and Locations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 border-t border-gray-200 pt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"-my-5 divide-y divide-gray-200\",children:[blockedDevices.length===0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Not available\"}),blockedDevices.map(function(device){return/*#__PURE__*/_jsx(\"li\",{className:\"py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-900\",children:[device.device,\" \",device.deviceType,\" - \",device.time]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 text-sm text-gray-500\",children:[\"(\",device.ipAddress,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:device.location}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"\\u2022\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[device.browser,\" on \",device.operatingSystem]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"button\",{disabled:loading[device._id],onClick:function onClick(){return handleUnblock(device._id);},type:\"button\",className:\"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white \".concat(loading[device._id]?\"bg-gray-400 cursor-not-allowed\":\"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400\"),children:loading[device._id]?/*#__PURE__*/_jsx(LoadingSpinner,{loadingText:\"unblocking...\"}):\"Unblock\"})})]})},device._id);})]})})})]});};export default BlockedDevicesLocations;","map":{"version":3,"names":["useState","useDispatch","getTrustedContextAuthDataAction","getBlockedAuthContextDataAction","unblockContextAuthDataAction","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","BlockedDevicesLocations","_ref","blockedContextAuthData","_useState","_useState2","_slicedToArray","loading","setLoading","dispatch","handleUnblock","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","contextId","wrap","_callee$","_context","prev","next","prevState","_objectSpread","_defineProperty","stop","_x","apply","arguments","blockedDevices","map","device","_id","deviceType","ipAddress","ip","location","concat","city","country","browser","operatingSystem","os","time","className","children","length","disabled","onClick","type","loadingText"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/profile/BlockedDevicesLocations.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  getTrustedContextAuthDataAction,\n  getBlockedAuthContextDataAction,\n  unblockContextAuthDataAction,\n} from \"../../redux/actions/authActions\";\nimport LoadingSpinner from \"../loader/ButtonLoadingSpinner\";\n\nconst BlockedDevicesLocations = ({ blockedContextAuthData }) => {\n  const [loading, setLoading] = useState({});\n  const dispatch = useDispatch();\n\n  const handleUnblock = async (contextId) => {\n    setLoading((prevState) => ({\n      ...prevState,\n      [contextId]: true,\n    }));\n\n    await dispatch(unblockContextAuthDataAction(contextId));\n    await dispatch(getBlockedAuthContextDataAction());\n    await dispatch(getTrustedContextAuthDataAction());\n\n    setLoading((prevState) => ({\n      ...prevState,\n      [contextId]: false,\n    }));\n  };\n\n  const blockedDevices = blockedContextAuthData?.map((device) => ({\n    _id: device._id,\n    device: device.device,\n    deviceType: device.deviceType,\n    ipAddress: device.ip,\n    location: `${device.city}, ${device.country}`,\n    browser: device.browser,\n    operatingSystem: device.os,\n    time: device.time,\n  }));\n\n  return (\n    <div className=\"max-w-3xl mx-auto mt-12 p-5\">\n      <h2 className=\"text-lg font-medium text-gray-900\">\n        Blocked Devices and Locations\n      </h2>\n      <div className=\"mt-6 border-t border-gray-200 pt-6\">\n        <div className=\"flow-root\">\n          <ul className=\"-my-5 divide-y divide-gray-200\">\n            {blockedDevices.length === 0 && (\n              <span className=\"text-sm font-medium text-gray-900\">\n                Not available\n              </span>\n            )}\n            {blockedDevices.map((device) => (\n              <li key={device._id} className=\"py-5\">\n                <div className=\"flex items-center justify-between space-x-4\">\n                  <div className=\"min-w-0 flex-1\">\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-900\">\n                        {device.device} {device.deviceType} - {device.time}\n                      </span>\n\n                      <span className=\"ml-1 text-sm text-gray-500\">\n                        ({device.ipAddress})\n                      </span>\n                    </div>\n                    <div className=\"mt-1 flex items-center space-x-4\">\n                      <span className=\"text-sm text-gray-500\">\n                        {device.location}\n                      </span>\n                      <span className=\"text-sm text-gray-500\">â€¢</span>\n                      <span className=\"text-sm text-gray-500\">\n                        {device.browser} on {device.operatingSystem}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex-shrink-0\">\n                    <button\n                      disabled={loading[device._id]}\n                      onClick={() => handleUnblock(device._id)}\n                      type=\"button\"\n                      className={`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white ${\n                        loading[device._id]\n                          ? \"bg-gray-400 cursor-not-allowed\"\n                          : \"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400\"\n                      }`}\n                    >\n                      {loading[device._id] ? (\n                        <LoadingSpinner loadingText={\"unblocking...\"} />\n                      ) : (\n                        \"Unblock\"\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BlockedDevicesLocations;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}