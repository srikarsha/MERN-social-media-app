{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = process.env.REACT_APP_API_URL;\nconst ADMIN_URL = `${BASE_URL}/admin`;\nconst authInterceptor = req => {\n  var _JSON$parse;\n  const accessToken = (_JSON$parse = JSON.parse(localStorage.getItem(\"profile\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.accessToken;\n  if (accessToken) {\n    req.headers.Authorization = `Bearer ${accessToken}`;\n  }\n  return req;\n};\nconst adminAuthInterceptor = req => {\n  var _JSON$parse2;\n  const accessToken = (_JSON$parse2 = JSON.parse(localStorage.getItem(\"admin\"))) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.accessToken;\n  if (accessToken) {\n    req.headers.Authorization = `Bearer ${accessToken}`;\n  }\n  return req;\n};\nexport const API = axios.create({\n  baseURL: BASE_URL\n});\nexport const ADMIN_API = axios.create({\n  baseURL: ADMIN_URL\n});\nexport const COMMUNITY_API = axios.create({\n  baseURL: BASE_URL\n});\nAPI.interceptors.request.use(authInterceptor);\nADMIN_API.interceptors.request.use(adminAuthInterceptor);\nCOMMUNITY_API.interceptors.request.use(req => {\n  req.headers[\"Content-Type\"] = \"application/json\";\n  return authInterceptor(req);\n});\nexport const handleApiError = async error => {\n  try {\n    var _error$response, _error$response$data;\n    const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"An unexpected error occurred.\";\n    const data = null;\n    return {\n      error: errorMessage,\n      data\n    };\n  } catch (err) {\n    throw new Error(\"An unexpected error occurred.\");\n  }\n};","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_API_URL","ADMIN_URL","authInterceptor","req","_JSON$parse","accessToken","JSON","parse","localStorage","getItem","headers","Authorization","adminAuthInterceptor","_JSON$parse2","API","create","baseURL","ADMIN_API","COMMUNITY_API","interceptors","request","use","handleApiError","error","_error$response","_error$response$data","errorMessage","response","data","message","err","Error"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/redux/api/utils.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_API_URL;\nconst ADMIN_URL = `${BASE_URL}/admin`;\n\nconst authInterceptor = (req) => {\n  const accessToken = JSON.parse(localStorage.getItem(\"profile\"))?.accessToken;\n  if (accessToken) {\n    req.headers.Authorization = `Bearer ${accessToken}`;\n  }\n  return req;\n};\n\nconst adminAuthInterceptor = (req) => {\n  const accessToken = JSON.parse(localStorage.getItem(\"admin\"))?.accessToken;\n  if (accessToken) {\n    req.headers.Authorization = `Bearer ${accessToken}`;\n  }\n  return req;\n};\n\nexport const API = axios.create({\n  baseURL: BASE_URL,\n});\n\nexport const ADMIN_API = axios.create({\n  baseURL: ADMIN_URL,\n});\n\nexport const COMMUNITY_API = axios.create({\n  baseURL: BASE_URL,\n});\n\nAPI.interceptors.request.use(authInterceptor);\nADMIN_API.interceptors.request.use(adminAuthInterceptor);\nCOMMUNITY_API.interceptors.request.use((req) => {\n  req.headers[\"Content-Type\"] = \"application/json\";\n  return authInterceptor(req);\n});\n\nexport const handleApiError = async (error) => {\n  try {\n    const errorMessage =\n      error.response?.data?.message || \"An unexpected error occurred.\";\n    const data = null;\n    return { error: errorMessage, data };\n  } catch (err) {\n    throw new Error(\"An unexpected error occurred.\");\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAC9C,MAAMC,SAAS,GAAI,GAAEJ,QAAS,QAAO;AAErC,MAAMK,eAAe,GAAIC,GAAG,IAAK;EAAA,IAAAC,WAAA;EAC/B,MAAMC,WAAW,IAAAD,WAAA,GAAGE,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,cAAAL,WAAA,uBAA3CA,WAAA,CAA6CC,WAAW;EAC5E,IAAIA,WAAW,EAAE;IACfF,GAAG,CAACO,OAAO,CAACC,aAAa,GAAI,UAASN,WAAY,EAAC;EACrD;EACA,OAAOF,GAAG;AACZ,CAAC;AAED,MAAMS,oBAAoB,GAAIT,GAAG,IAAK;EAAA,IAAAU,YAAA;EACpC,MAAMR,WAAW,IAAAQ,YAAA,GAAGP,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,cAAAI,YAAA,uBAAzCA,YAAA,CAA2CR,WAAW;EAC1E,IAAIA,WAAW,EAAE;IACfF,GAAG,CAACO,OAAO,CAACC,aAAa,GAAI,UAASN,WAAY,EAAC;EACrD;EACA,OAAOF,GAAG;AACZ,CAAC;AAED,OAAO,MAAMW,GAAG,GAAGlB,KAAK,CAACmB,MAAM,CAAC;EAC9BC,OAAO,EAAEnB;AACX,CAAC,CAAC;AAEF,OAAO,MAAMoB,SAAS,GAAGrB,KAAK,CAACmB,MAAM,CAAC;EACpCC,OAAO,EAAEf;AACX,CAAC,CAAC;AAEF,OAAO,MAAMiB,aAAa,GAAGtB,KAAK,CAACmB,MAAM,CAAC;EACxCC,OAAO,EAAEnB;AACX,CAAC,CAAC;AAEFiB,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAACnB,eAAe,CAAC;AAC7Ce,SAAS,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAACT,oBAAoB,CAAC;AACxDM,aAAa,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAAElB,GAAG,IAAK;EAC9CA,GAAG,CAACO,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EAChD,OAAOR,eAAe,CAACC,GAAG,CAAC;AAC7B,CAAC,CAAC;AAEF,OAAO,MAAMmB,cAAc,GAAG,MAAOC,KAAK,IAAK;EAC7C,IAAI;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IACF,MAAMC,YAAY,GAChB,EAAAF,eAAA,GAAAD,KAAK,CAACI,QAAQ,cAAAH,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBI,IAAI,cAAAH,oBAAA,uBAApBA,oBAAA,CAAsBI,OAAO,KAAI,+BAA+B;IAClE,MAAMD,IAAI,GAAG,IAAI;IACjB,OAAO;MAAEL,KAAK,EAAEG,YAAY;MAAEE;IAAK,CAAC;EACtC,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,+BAA+B,CAAC;EAClD;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}