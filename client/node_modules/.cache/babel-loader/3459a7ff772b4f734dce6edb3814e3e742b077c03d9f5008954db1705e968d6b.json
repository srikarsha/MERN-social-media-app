{"ast":null,"code":"var _jsxFileName = \"E:\\\\SEM 4\\\\MERN\\\\end_sem_project\\\\SocialEcho-main\\\\client\\\\src\\\\components\\\\home\\\\MainSection.jsx\",\n  _s = $RefreshSig$();\nimport { memo, useMemo, useEffect, useState, useCallback } from \"react\";\nimport { getPostsAction, clearPostsAction } from \"../../redux/actions/postActions\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Post from \"../post/Post\";\nimport CommonLoading from \"../loader/CommonLoading\";\nimport Home from \"../../assets/home.jpg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MemoizedPost = /*#__PURE__*/memo(Post);\n_c = MemoizedPost;\nconst LoadMoreButton = ({\n  onClick,\n  isLoading\n}) => /*#__PURE__*/_jsxDEV(\"button\", {\n  className: \"bg-primary hover:bg-blue-700 text-sm text-white font-semibold rounded-md w-full p-2 my-3\",\n  onClick: onClick,\n  disabled: isLoading,\n  children: isLoading ? \"Loading...\" : \"Load More Posts\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 3\n}, this);\n_c2 = LoadMoreButton;\nconst MainSection = ({\n  userData\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const [isLoading, setIsLoading] = useState(true);\n  const posts = useSelector(state => {\n    var _state$posts;\n    return (_state$posts = state.posts) === null || _state$posts === void 0 ? void 0 : _state$posts.posts;\n  });\n  const totalPosts = useSelector(state => {\n    var _state$posts2;\n    return (_state$posts2 = state.posts) === null || _state$posts2 === void 0 ? void 0 : _state$posts2.totalPosts;\n  });\n  const [isLoadMoreLoading, setIsLoadMoreLoading] = useState(false);\n  const LIMIT = 10;\n  useEffect(() => {\n    if (userData) {\n      dispatch(getPostsAction(LIMIT, 0)).finally(() => {\n        setIsLoading(false);\n      });\n    }\n    return () => {\n      dispatch(clearPostsAction());\n    };\n  }, [userData, dispatch, LIMIT]);\n  const handleLoadMore = useCallback(() => {\n    setIsLoadMoreLoading(true);\n    dispatch(getPostsAction(LIMIT, posts.length)).finally(() => {\n      setIsLoadMoreLoading(false);\n    });\n  }, [dispatch, LIMIT, posts.length]);\n  const memoizedPosts = useMemo(() => {\n    return posts.map(post => /*#__PURE__*/_jsxDEV(MemoizedPost, {\n      post: post\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 32\n    }, this));\n  }, [posts]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-screen\",\n      children: /*#__PURE__*/_jsxDEV(CommonLoading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: memoizedPosts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), posts.length > 0 && posts.length < totalPosts && /*#__PURE__*/_jsxDEV(LoadMoreButton, {\n      onClick: handleLoadMore,\n      isLoading: isLoadMoreLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), posts.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-700 flex justify-center items-center flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"py-5 font-semibold\",\n        children: \"No posts to show. Join a community and post something.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        loading: \"lazy\",\n        src: Home,\n        alt: \"no post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(MainSection, \"T1+U4NYdpAknfmKCV8TbYX9awqw=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c3 = MainSection;\nexport default MainSection;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"MemoizedPost\");\n$RefreshReg$(_c2, \"LoadMoreButton\");\n$RefreshReg$(_c3, \"MainSection\");","map":{"version":3,"names":["memo","useMemo","useEffect","useState","useCallback","getPostsAction","clearPostsAction","useSelector","useDispatch","Post","CommonLoading","Home","jsxDEV","_jsxDEV","Fragment","_Fragment","MemoizedPost","_c","LoadMoreButton","onClick","isLoading","className","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","MainSection","userData","_s","dispatch","setIsLoading","posts","state","_state$posts","totalPosts","_state$posts2","isLoadMoreLoading","setIsLoadMoreLoading","LIMIT","finally","handleLoadMore","length","memoizedPosts","map","post","_id","loading","src","alt","_c3","$RefreshReg$"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/home/MainSection.jsx"],"sourcesContent":["import { memo, useMemo, useEffect, useState, useCallback } from \"react\";\nimport {\n  getPostsAction,\n  clearPostsAction,\n} from \"../../redux/actions/postActions\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Post from \"../post/Post\";\nimport CommonLoading from \"../loader/CommonLoading\";\nimport Home from \"../../assets/home.jpg\";\n\nconst MemoizedPost = memo(Post);\n\nconst LoadMoreButton = ({ onClick, isLoading }) => (\n  <button\n    className=\"bg-primary hover:bg-blue-700 text-sm text-white font-semibold rounded-md w-full p-2 my-3\"\n    onClick={onClick}\n    disabled={isLoading}\n  >\n    {isLoading ? \"Loading...\" : \"Load More Posts\"}\n  </button>\n);\n\nconst MainSection = ({ userData }) => {\n  const dispatch = useDispatch();\n  const [isLoading, setIsLoading] = useState(true);\n  const posts = useSelector((state) => state.posts?.posts);\n  const totalPosts = useSelector((state) => state.posts?.totalPosts);\n  const [isLoadMoreLoading, setIsLoadMoreLoading] = useState(false);\n\n  const LIMIT = 10;\n\n  useEffect(() => {\n    if (userData) {\n      dispatch(getPostsAction(LIMIT, 0)).finally(() => {\n        setIsLoading(false);\n      });\n    }\n\n    return () => {\n      dispatch(clearPostsAction());\n    };\n  }, [userData, dispatch, LIMIT]);\n\n  const handleLoadMore = useCallback(() => {\n    setIsLoadMoreLoading(true);\n    dispatch(getPostsAction(LIMIT, posts.length)).finally(() => {\n      setIsLoadMoreLoading(false);\n    });\n  }, [dispatch, LIMIT, posts.length]);\n\n  const memoizedPosts = useMemo(() => {\n    return posts.map((post) => <MemoizedPost key={post._id} post={post} />);\n  }, [posts]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen\">\n        <CommonLoading />\n      </div>\n    );\n  }\n  return (\n    <>\n      <div>{memoizedPosts}</div>\n\n      {posts.length > 0 && posts.length < totalPosts && (\n        <LoadMoreButton\n          onClick={handleLoadMore}\n          isLoading={isLoadMoreLoading}\n        />\n      )}\n\n      {posts.length === 0 && (\n        <div className=\"text-center text-gray-700 flex justify-center items-center flex-col\">\n          <p className=\"py-5 font-semibold\">\n            No posts to show. Join a community and post something.\n          </p>\n          <img loading=\"lazy\" src={Home} alt=\"no post\" />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default MainSection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}