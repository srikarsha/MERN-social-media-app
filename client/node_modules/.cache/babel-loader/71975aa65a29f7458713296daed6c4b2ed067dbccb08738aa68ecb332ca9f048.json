{"ast":null,"code":"var _jsxFileName = \"E:\\\\SEM 4\\\\MERN\\\\end_sem_project\\\\SocialEcho-main\\\\client\\\\src\\\\components\\\\form\\\\CommentForm.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { addCommentAction, getPostAction, getComPostsAction, getOwnPostAction, clearCommentFailAction } from \"../../redux/actions/postActions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport InappropriatePost from \"../modals/InappropriatePostModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentForm = ({\n  communityId,\n  postId\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const [showInappropriateContentModal, setShowInappropriateContentModal] = useState(false);\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const newComment = {\n      content,\n      postId\n    };\n    try {\n      setIsLoading(true);\n      await dispatch(addCommentAction(postId, newComment));\n      await dispatch(getPostAction(postId));\n      await dispatch(getOwnPostAction(postId));\n      setIsLoading(false);\n      setContent(\"\");\n      await dispatch(getComPostsAction(communityId));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const isCommentInappropriate = useSelector(state => {\n    var _state$posts;\n    return (_state$posts = state.posts) === null || _state$posts === void 0 ? void 0 : _state$posts.isCommentInappropriate;\n  });\n  useEffect(() => {\n    if (isCommentInappropriate) {\n      setShowInappropriateContentModal(true);\n    }\n  }, [isCommentInappropriate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(InappropriatePost, {\n      closeInappropriateContentModal: () => {\n        setShowInappropriateContentModal(false);\n        dispatch(clearCommentFailAction());\n      },\n      showInappropriateContentModal: showInappropriateContentModal,\n      contentType: \"comment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-4\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"w-full px-3 py-2 border rounded-md focus:outline-none focus:border-blue-500 resize-none\",\n          name: \"content\",\n          value: content,\n          onChange: e => setContent(e.target.value),\n          maxLength: 500,\n          required: true,\n          placeholder: \"Write a comment...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600\",\n          type: \"submit\",\n          disabled: isLoading,\n          style: {\n            opacity: isLoading ? 0.5 : 1,\n            cursor: isLoading ? \"not-allowed\" : \"pointer\"\n          },\n          children: isLoading ? \"Loading...\" : \"Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentForm, \"X2YkeYsB/VwFKbw/OcU35NHzdVg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = CommentForm;\nexport default CommentForm;\nvar _c;\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"names":["useState","useEffect","addCommentAction","getPostAction","getComPostsAction","getOwnPostAction","clearCommentFailAction","useDispatch","useSelector","InappropriatePost","jsxDEV","_jsxDEV","CommentForm","communityId","postId","_s","dispatch","showInappropriateContentModal","setShowInappropriateContentModal","content","setContent","isLoading","setIsLoading","handleSubmit","e","preventDefault","newComment","isCommentInappropriate","state","_state$posts","posts","children","closeInappropriateContentModal","contentType","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","className","name","value","onChange","target","maxLength","required","placeholder","type","disabled","style","opacity","cursor","_c","$RefreshReg$"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/form/CommentForm.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport {\n  addCommentAction,\n  getPostAction,\n  getComPostsAction,\n  getOwnPostAction,\n  clearCommentFailAction,\n} from \"../../redux/actions/postActions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport InappropriatePost from \"../modals/InappropriatePostModal\";\n\nconst CommentForm = ({ communityId, postId }) => {\n  const dispatch = useDispatch();\n  const [showInappropriateContentModal, setShowInappropriateContentModal] =\n    useState(false);\n\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const newComment = {\n      content,\n      postId,\n    };\n    try {\n      setIsLoading(true);\n      await dispatch(addCommentAction(postId, newComment));\n      await dispatch(getPostAction(postId));\n      await dispatch(getOwnPostAction(postId));\n\n      setIsLoading(false);\n      setContent(\"\");\n\n      await dispatch(getComPostsAction(communityId));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const isCommentInappropriate = useSelector(\n    (state) => state.posts?.isCommentInappropriate\n  );\n\n  useEffect(() => {\n    if (isCommentInappropriate) {\n      setShowInappropriateContentModal(true);\n    }\n  }, [isCommentInappropriate]);\n\n  return (\n    <div>\n      <InappropriatePost\n        closeInappropriateContentModal={() => {\n          setShowInappropriateContentModal(false);\n          dispatch(clearCommentFailAction());\n        }}\n        showInappropriateContentModal={showInappropriateContentModal}\n        contentType={\"comment\"}\n      />\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"my-4\">\n          <textarea\n            className=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:border-blue-500 resize-none\"\n            name=\"content\"\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            maxLength={500}\n            required\n            placeholder=\"Write a comment...\"\n          />\n        </div>\n        <div className=\"flex justify-end\">\n          <button\n            className=\"px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600\"\n            type=\"submit\"\n            disabled={isLoading}\n            style={{\n              opacity: isLoading ? 0.5 : 1,\n              cursor: isLoading ? \"not-allowed\" : \"pointer\",\n            }}\n          >\n            {isLoading ? \"Loading...\" : \"Comment\"}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CommentForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}