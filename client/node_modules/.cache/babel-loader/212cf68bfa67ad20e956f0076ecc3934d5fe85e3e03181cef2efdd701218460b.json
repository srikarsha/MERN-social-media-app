{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{reportPostAction}from\"../../redux/actions/communityActions\";import{useDispatch}from\"react-redux\";import{Dialog}from\"@headlessui/react\";import ButtonLoadingSpinner from\"../loader/ButtonLoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReportPostModal=function ReportPostModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,postId=_ref.postId,communityId=_ref.communityId,setReportedPost=_ref.setReportedPost;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),reportReason=_useState2[0],setReportReason=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var dispatch=useDispatch();var handleReportSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return dispatch(reportPostAction({postId:postId,reportReason:reportReason,communityId:communityId}));case 4:setIsLoading(false);setReportedPost(true);onClose();_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setIsLoading(false);onClose();case 13:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function handleReportSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Dialog,{open:isOpen,onClose:onClose,className:\"fixed inset-0 z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(Dialog.Overlay,{className:\"fixed inset-0 bg-black opacity-30\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block align-middle bg-white rounded-md text-left shadow-xl transform transition-all w-full mx-4 md:max-w-lg\",children:[/*#__PURE__*/_jsx(Dialog.Title,{as:\"h3\",className:\"text-lg font-medium leading-6 text-gray-900 p-4\",children:\"Report Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"report-reason\",className:\"block text-sm font-medium text-gray-700\",children:\"Reason for report\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"textarea\",{name:\"report-reason\",className:\"shadow-sm block w-full sm:text-sm rounded-md h-24 resize-none p-3 focus:outline-none focus:border\",id:\"report-reason\",value:reportReason,onChange:function onChange(e){return setReportReason(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end p-4\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:isLoading||!reportReason,type:\"button\",className:\"inline-flex justify-center px-4 py-2 text-sm font-medium text-white border rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 \".concat(isLoading||!reportReason?\"bg-gray-400 cursor-not-allowed\":\"bg-primary border-transparent hover:bg-blue-600 focus-visible:ring-blue-500\"),onClick:handleReportSubmit,children:isLoading?/*#__PURE__*/_jsx(ButtonLoadingSpinner,{loadingText:\"Reporting...\"}):\"Report\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"inline-flex justify-center px-4 py-2 ml-4 text-sm font-medium text-gray-700 bg-gray-100 border border-transparent rounded-md hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\",onClick:onClose,children:\"Cancel\"})]})]})]})});};export default ReportPostModal;","map":{"version":3,"names":["useState","reportPostAction","useDispatch","Dialog","ButtonLoadingSpinner","jsx","_jsx","jsxs","_jsxs","ReportPostModal","_ref","isOpen","onClose","postId","communityId","setReportedPost","_useState","_useState2","_slicedToArray","reportReason","setReportReason","_useState3","_useState4","isLoading","setIsLoading","dispatch","handleReportSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","stop","apply","arguments","open","className","children","Overlay","Title","as","htmlFor","name","id","value","onChange","e","target","disabled","type","concat","onClick","loadingText"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/modals/ReportPostModal.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { reportPostAction } from \"../../redux/actions/communityActions\";\nimport { useDispatch } from \"react-redux\";\n\nimport { Dialog } from \"@headlessui/react\";\nimport ButtonLoadingSpinner from \"../loader/ButtonLoadingSpinner\";\n\nconst ReportPostModal = ({\n  isOpen,\n  onClose,\n  postId,\n  communityId,\n  setReportedPost,\n}) => {\n  const [reportReason, setReportReason] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const dispatch = useDispatch();\n\n  const handleReportSubmit = async () => {\n    setIsLoading(true);\n    try {\n      await dispatch(\n        reportPostAction({\n          postId,\n          reportReason,\n          communityId,\n        })\n      );\n      setIsLoading(false);\n      setReportedPost(true);\n      onClose();\n    } catch (error) {\n      setIsLoading(false);\n      onClose();\n    }\n  };\n\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={onClose}\n      className=\"fixed inset-0 z-50 overflow-y-auto\"\n    >\n      <div className=\"fixed inset-0 flex items-center justify-center\">\n        <Dialog.Overlay className=\"fixed inset-0 bg-black opacity-30\" />\n\n        <div className=\"inline-block align-middle bg-white rounded-md text-left shadow-xl transform transition-all w-full mx-4 md:max-w-lg\">\n          <Dialog.Title\n            as=\"h3\"\n            className=\"text-lg font-medium leading-6 text-gray-900 p-4\"\n          >\n            Report Post\n          </Dialog.Title>\n\n          <div className=\"p-4\">\n            <label\n              htmlFor=\"report-reason\"\n              className=\"block text-sm font-medium text-gray-700\"\n            >\n              Reason for report\n            </label>\n            <div className=\"mt-1\">\n              <textarea\n                name=\"report-reason\"\n                className=\"shadow-sm block w-full sm:text-sm rounded-md h-24 resize-none p-3 focus:outline-none focus:border\"\n                id=\"report-reason\"\n                value={reportReason}\n                onChange={(e) => setReportReason(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div className=\"flex justify-end p-4\">\n            <button\n              disabled={isLoading || !reportReason}\n              type=\"button\"\n              className={`inline-flex justify-center px-4 py-2 text-sm font-medium text-white border rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ${\n                isLoading || !reportReason\n                  ? \"bg-gray-400 cursor-not-allowed\"\n                  : \"bg-primary border-transparent hover:bg-blue-600 focus-visible:ring-blue-500\"\n              }`}\n              onClick={handleReportSubmit}\n            >\n              {isLoading ? (\n                <ButtonLoadingSpinner loadingText={\"Reporting...\"} />\n              ) : (\n                \"Report\"\n              )}\n            </button>\n\n            <button\n              type=\"button\"\n              className=\"inline-flex justify-center px-4 py-2 ml-4 text-sm font-medium text-gray-700 bg-gray-100 border border-transparent rounded-md hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n              onClick={onClose}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ReportPostModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}