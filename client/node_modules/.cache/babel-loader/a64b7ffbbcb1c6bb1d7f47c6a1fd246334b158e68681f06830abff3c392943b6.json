{"ast":null,"code":"var _jsxFileName = \"E:\\\\SEM 4\\\\MERN\\\\end_sem_project\\\\SocialEcho-main\\\\client\\\\src\\\\components\\\\post\\\\Save.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, memo } from \"react\";\nimport { HiOutlineArchiveBoxArrowDown, HiOutlineArchiveBoxXMark } from \"react-icons/hi2\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { savePostAction, unsavePostAction, getSavedPostsAction, increaseSavedByCount, decreaseSavedByCount } from \"../../redux/actions/postActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Save = ({\n  postId\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const [saved, setSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const savedPosts = useSelector(state => {\n    var _state$posts;\n    return (_state$posts = state.posts) === null || _state$posts === void 0 ? void 0 : _state$posts.savedPosts;\n  });\n  const savedPostsIds = savedPosts.map(post => post._id);\n  useEffect(() => {\n    dispatch(getSavedPostsAction());\n  }, [dispatch]);\n  useEffect(() => {\n    if (savedPostsIds.includes(postId)) {\n      setSaved(true);\n    } else {\n      setSaved(false);\n    }\n  }, [postId, savedPostsIds]);\n  const handleSave = async () => {\n    try {\n      setIsSaving(true);\n      await dispatch(savePostAction(postId));\n      dispatch(increaseSavedByCount(postId));\n      setSaved(true);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const handleUnsave = async () => {\n    try {\n      setIsSaving(true);\n      await dispatch(unsavePostAction(postId));\n      dispatch(decreaseSavedByCount(postId));\n      setSaved(false);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: saved ? handleUnsave : handleSave,\n    className: \"flex items-center gap-1 mr-2 tooltip\",\n    disabled: isSaving,\n    children: isSaving ? \"Saving...\" : saved ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tooltiptext\",\n        children: \"Remove from saved\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(HiOutlineArchiveBoxXMark, {\n        className: \"text-2xl\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tooltiptext\",\n        children: \"Save post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(HiOutlineArchiveBoxArrowDown, {\n        className: \"text-2xl\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(Save, \"53YWFcx1Gj/L5ozbj1ixl5djKFk=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Save;\nexport default _c2 = /*#__PURE__*/memo(Save);\nvar _c, _c2;\n$RefreshReg$(_c, \"Save\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["useEffect","useState","memo","HiOutlineArchiveBoxArrowDown","HiOutlineArchiveBoxXMark","useDispatch","useSelector","savePostAction","unsavePostAction","getSavedPostsAction","increaseSavedByCount","decreaseSavedByCount","jsxDEV","_jsxDEV","Fragment","_Fragment","Save","postId","_s","dispatch","saved","setSaved","isSaving","setIsSaving","savedPosts","state","_state$posts","posts","savedPostsIds","map","post","_id","includes","handleSave","handleUnsave","onClick","className","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","_c2","$RefreshReg$"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/post/Save.jsx"],"sourcesContent":["import { useEffect, useState, memo } from \"react\";\nimport {\n  HiOutlineArchiveBoxArrowDown,\n  HiOutlineArchiveBoxXMark,\n} from \"react-icons/hi2\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  savePostAction,\n  unsavePostAction,\n  getSavedPostsAction,\n  increaseSavedByCount,\n  decreaseSavedByCount,\n} from \"../../redux/actions/postActions\";\n\nconst Save = ({ postId }) => {\n  const dispatch = useDispatch();\n\n  const [saved, setSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const savedPosts = useSelector((state) => state.posts?.savedPosts);\n  const savedPostsIds = savedPosts.map((post) => post._id);\n\n  useEffect(() => {\n    dispatch(getSavedPostsAction());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (savedPostsIds.includes(postId)) {\n      setSaved(true);\n    } else {\n      setSaved(false);\n    }\n  }, [postId, savedPostsIds]);\n\n  const handleSave = async () => {\n    try {\n      setIsSaving(true);\n      await dispatch(savePostAction(postId));\n      dispatch(increaseSavedByCount(postId));\n      setSaved(true);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleUnsave = async () => {\n    try {\n      setIsSaving(true);\n      await dispatch(unsavePostAction(postId));\n      dispatch(decreaseSavedByCount(postId));\n      setSaved(false);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={saved ? handleUnsave : handleSave}\n      className=\"flex items-center gap-1 mr-2 tooltip\"\n      disabled={isSaving}\n    >\n      {isSaving ? (\n        \"Saving...\"\n      ) : saved ? (\n        <>\n          <span className=\"tooltiptext\">Remove from saved</span>\n          <HiOutlineArchiveBoxXMark className=\"text-2xl\" />\n        </>\n      ) : (\n        <>\n          <span className=\"tooltiptext\">Save post</span>\n          <HiOutlineArchiveBoxArrowDown className=\"text-2xl\" />\n        </>\n      )}\n    </button>\n  );\n};\n\nexport default memo(Save);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}