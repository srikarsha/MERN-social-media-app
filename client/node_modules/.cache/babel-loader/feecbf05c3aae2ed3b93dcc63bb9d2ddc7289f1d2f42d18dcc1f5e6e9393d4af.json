{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";var BASE_URL=process.env.REACT_APP_API_URL;var ADMIN_URL=\"\".concat(BASE_URL,\"/admin\");var authInterceptor=function authInterceptor(req){var _JSON$parse;var accessToken=(_JSON$parse=JSON.parse(localStorage.getItem(\"profile\")))===null||_JSON$parse===void 0?void 0:_JSON$parse.accessToken;if(accessToken){req.headers.Authorization=\"Bearer \".concat(accessToken);}return req;};var adminAuthInterceptor=function adminAuthInterceptor(req){var _JSON$parse2;var accessToken=(_JSON$parse2=JSON.parse(localStorage.getItem(\"admin\")))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.accessToken;if(accessToken){req.headers.Authorization=\"Bearer \".concat(accessToken);}return req;};export var API=axios.create({baseURL:BASE_URL});export var ADMIN_API=axios.create({baseURL:ADMIN_URL});export var COMMUNITY_API=axios.create({baseURL:BASE_URL});API.interceptors.request.use(authInterceptor);ADMIN_API.interceptors.request.use(adminAuthInterceptor);COMMUNITY_API.interceptors.request.use(function(req){req.headers[\"Content-Type\"]=\"application/json\";return authInterceptor(req);});export var handleApiError=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(error){var _error$response,_error$response$data,errorMessage,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"An unexpected error occurred.\";data=null;return _context.abrupt(\"return\",{error:errorMessage,data:data});case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);throw new Error(\"An unexpected error occurred.\");case 9:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function handleApiError(_x){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_API_URL","ADMIN_URL","concat","authInterceptor","req","_JSON$parse","accessToken","JSON","parse","localStorage","getItem","headers","Authorization","adminAuthInterceptor","_JSON$parse2","API","create","baseURL","ADMIN_API","COMMUNITY_API","interceptors","request","use","handleApiError","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","error","_error$response","_error$response$data","errorMessage","data","wrap","_callee$","_context","prev","next","response","message","abrupt","t0","Error","stop","_x","apply","arguments"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/redux/api/utils.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_API_URL;\nconst ADMIN_URL = `${BASE_URL}/admin`;\n\nconst authInterceptor = (req) => {\n  const accessToken = JSON.parse(localStorage.getItem(\"profile\"))?.accessToken;\n  if (accessToken) {\n    req.headers.Authorization = `Bearer ${accessToken}`;\n  }\n  return req;\n};\n\nconst adminAuthInterceptor = (req) => {\n  const accessToken = JSON.parse(localStorage.getItem(\"admin\"))?.accessToken;\n  if (accessToken) {\n    req.headers.Authorization = `Bearer ${accessToken}`;\n  }\n  return req;\n};\n\nexport const API = axios.create({\n  baseURL: BASE_URL,\n});\n\nexport const ADMIN_API = axios.create({\n  baseURL: ADMIN_URL,\n});\n\nexport const COMMUNITY_API = axios.create({\n  baseURL: BASE_URL,\n});\n\nAPI.interceptors.request.use(authInterceptor);\nADMIN_API.interceptors.request.use(adminAuthInterceptor);\nCOMMUNITY_API.interceptors.request.use((req) => {\n  req.headers[\"Content-Type\"] = \"application/json\";\n  return authInterceptor(req);\n});\n\nexport const handleApiError = async (error) => {\n  try {\n    const errorMessage =\n      error.response?.data?.message || \"An unexpected error occurred.\";\n    const data = null;\n    return { error: errorMessage, data };\n  } catch (err) {\n    throw new Error(\"An unexpected error occurred.\");\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}