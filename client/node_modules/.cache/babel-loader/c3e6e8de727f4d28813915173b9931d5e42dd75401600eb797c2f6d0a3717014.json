{"ast":null,"code":"var _jsxFileName = \"E:\\\\SEM 4\\\\MERN\\\\end_sem_project\\\\SocialEcho-main\\\\client\\\\src\\\\components\\\\post\\\\Like.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { HiOutlineHandThumbUp, HiHandThumbUp } from \"react-icons/hi2\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { likePostAction, unlikePostAction } from \"../../redux/actions/postActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Like = ({\n  post\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    _id,\n    likes\n  } = post;\n  const userData = useSelector(state => {\n    var _state$auth;\n    return (_state$auth = state.auth) === null || _state$auth === void 0 ? void 0 : _state$auth.userData;\n  });\n  const [likeState, setLikeState] = useState({\n    liked: post.likes.includes(userData._id),\n    localLikes: likes.length\n  });\n  useEffect(() => {\n    setLikeState({\n      liked: post.likes.includes(userData._id),\n      localLikes: post.likes.length\n    });\n  }, [post.likes, userData._id]);\n  const toggleLike = async e => {\n    e.preventDefault();\n    const optimisticLikes = likeState.liked ? likeState.localLikes - 1 : likeState.localLikes + 1;\n    setLikeState(prevState => ({\n      ...prevState,\n      liked: !prevState.liked,\n      localLikes: optimisticLikes\n    }));\n    try {\n      if (likeState.liked) {\n        dispatch(unlikePostAction(_id));\n      } else {\n        dispatch(likePostAction(_id));\n      }\n    } catch (error) {\n      setLikeState(prevState => ({\n        ...prevState,\n        liked: !prevState.liked,\n        localLikes: optimisticLikes\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: toggleLike,\n    className: \"flex items-center cursor-pointer gap-1 text-lg\",\n    children: [likeState.liked ? /*#__PURE__*/_jsxDEV(HiHandThumbUp, {\n      className: \"text-2xl\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(HiOutlineHandThumbUp, {\n      className: \"text-2xl\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), \" \", likeState.localLikes]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(Like, \"dFl3Koosbye8KWb1tQYLSWtxv4A=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Like;\nexport default Like;\nvar _c;\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["useState","useEffect","HiOutlineHandThumbUp","HiHandThumbUp","useDispatch","useSelector","likePostAction","unlikePostAction","jsxDEV","_jsxDEV","Like","post","_s","dispatch","_id","likes","userData","state","_state$auth","auth","likeState","setLikeState","liked","includes","localLikes","length","toggleLike","e","preventDefault","optimisticLikes","prevState","error","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/post/Like.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { HiOutlineHandThumbUp, HiHandThumbUp } from \"react-icons/hi2\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  likePostAction,\n  unlikePostAction,\n} from \"../../redux/actions/postActions\";\n\nconst Like = ({ post }) => {\n  const dispatch = useDispatch();\n  const { _id, likes } = post;\n  const userData = useSelector((state) => state.auth?.userData);\n\n  const [likeState, setLikeState] = useState({\n    liked: post.likes.includes(userData._id),\n    localLikes: likes.length,\n  });\n\n  useEffect(() => {\n    setLikeState({\n      liked: post.likes.includes(userData._id),\n      localLikes: post.likes.length,\n    });\n  }, [post.likes, userData._id]);\n\n  const toggleLike = async (e) => {\n    e.preventDefault();\n    const optimisticLikes = likeState.liked\n      ? likeState.localLikes - 1\n      : likeState.localLikes + 1;\n\n    setLikeState((prevState) => ({\n      ...prevState,\n      liked: !prevState.liked,\n      localLikes: optimisticLikes,\n    }));\n\n    try {\n      if (likeState.liked) {\n        dispatch(unlikePostAction(_id));\n      } else {\n        dispatch(likePostAction(_id));\n      }\n    } catch (error) {\n      setLikeState((prevState) => ({\n        ...prevState,\n        liked: !prevState.liked,\n        localLikes: optimisticLikes,\n      }));\n    }\n  };\n\n  return (\n    <button\n      onClick={toggleLike}\n      className=\"flex items-center cursor-pointer gap-1 text-lg\"\n    >\n      {likeState.liked ? (\n        <HiHandThumbUp className=\"text-2xl\" />\n      ) : (\n        <HiOutlineHandThumbUp className=\"text-2xl\" />\n      )}{\" \"}\n      {likeState.localLikes}\n    </button>\n  );\n};\n\nexport default Like;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}