{"ast":null,"code":"var _jsxFileName = \"E:\\\\SEM 4\\\\MERN\\\\end_sem_project\\\\SocialEcho-main\\\\client\\\\src\\\\components\\\\community\\\\Rightbar.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useMemo, useCallback } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport LeaveModal from \"../modals/LeaveModal\";\nimport { getCommunityAction } from \"../../redux/actions/communityActions\";\nimport placeholder from \"../../assets/placeholder.png\";\nimport CommonLoading from \"../loader/CommonLoading\";\nimport { useBannerLoading, useIsModeratorUpdated } from \"../../hooks/useCommunityData\";\nimport { HiUserGroup, HiOutlineCheckBadge } from \"react-icons/hi2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Rightbar = () => {\n  _s();\n  const [showLeaveModal, setShowLeaveModal] = useState(false);\n  const dispatch = useDispatch();\n  const {\n    communityName\n  } = useParams();\n  const toggleLeaveModal = useCallback(() => {\n    setShowLeaveModal(prevState => !prevState);\n  }, []);\n  useEffect(() => {\n    dispatch(getCommunityAction(communityName));\n  }, [dispatch, communityName]);\n  const communityData = useSelector(state => {\n    var _state$community;\n    return (_state$community = state.community) === null || _state$community === void 0 ? void 0 : _state$community.communityData;\n  });\n  const isModeratorOfThisCommunity = useSelector(state => {\n    var _state$auth;\n    return (_state$auth = state.auth) === null || _state$auth === void 0 ? void 0 : _state$auth.isModeratorOfThisCommunity;\n  });\n  const {\n    name,\n    description,\n    members,\n    rules,\n    banner\n  } = useMemo(() => communityData || {}, [communityData]);\n  const bannerLoaded = useBannerLoading(banner);\n  const isModeratorUpdated = useIsModeratorUpdated(isModeratorOfThisCommunity);\n  if (!communityData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(CommonLoading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-md \",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col \",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-bold\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 text-primary mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(HiUserGroup, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mr-2\",\n          children: [(members === null || members === void 0 ? void 0 : members.length) || 0, \" \", (members === null || members === void 0 ? void 0 : members.length) === 1 ? \"member\" : \"members\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), bannerLoaded ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: banner,\n      alt: \"community banner\",\n      className: \"w-full h-40 rounded-md object-cover mb-4\",\n      onError: e => {\n        e.target.src = placeholder;\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: placeholder,\n      alt: \"community banner placeholder\",\n      className: \"w-full h-40 rounded-md object-cover mb-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-4\",\n      children: [isModeratorOfThisCommunity && /*#__PURE__*/_jsxDEV(Link, {\n        to: `/community/${communityName}/moderator`,\n        className: \"px-4 bg-primary text-white shadow-md shadow-gray-50 text-sm py-1 rounded-md flex justify-center items-center w-full my-2 hover:bg-primary-600\",\n        children: \"Moderation Panel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), isModeratorUpdated && !isModeratorOfThisCommunity && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleLeaveModal,\n        className: \"px-4 shadow-md shadow-red-50 text-sm py-1 border border-red-400 hover:text-white hover:bg-red-400 text-red-400 rounded-md flex justify-center items-center w-full my-2\",\n        children: \"Leave Community\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(LeaveModal, {\n        show: showLeaveModal,\n        toggle: toggleLeaveModal,\n        communityName: communityName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), rules && rules.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-slate-900 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-bold\",\n        children: \"Community Guidelines:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"flex flex-col gap-2 \",\n        children: rules.map(rule => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"flex items-start gap-2 \",\n          children: [/*#__PURE__*/_jsxDEV(HiOutlineCheckBadge, {\n            className: \"text-lg flex-shrink-0 mt-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this), rule.rule]\n        }, rule._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(Rightbar, \"yHOCPHYlgBdA/8S2wJ6EynsiHGo=\", false, function () {\n  return [useDispatch, useParams, useSelector, useSelector, useBannerLoading, useIsModeratorUpdated];\n});\n_c = Rightbar;\nexport default Rightbar;\nvar _c;\n$RefreshReg$(_c, \"Rightbar\");","map":{"version":3,"names":["useEffect","useState","useMemo","useCallback","Link","useParams","useDispatch","useSelector","LeaveModal","getCommunityAction","placeholder","CommonLoading","useBannerLoading","useIsModeratorUpdated","HiUserGroup","HiOutlineCheckBadge","jsxDEV","_jsxDEV","Rightbar","_s","showLeaveModal","setShowLeaveModal","dispatch","communityName","toggleLeaveModal","prevState","communityData","state","_state$community","community","isModeratorOfThisCommunity","_state$auth","auth","name","description","members","rules","banner","bannerLoaded","isModeratorUpdated","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","src","alt","onError","e","target","to","onClick","show","toggle","map","rule","_id","_c","$RefreshReg$"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/community/Rightbar.jsx"],"sourcesContent":["import { useEffect, useState, useMemo, useCallback } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport LeaveModal from \"../modals/LeaveModal\";\nimport { getCommunityAction } from \"../../redux/actions/communityActions\";\nimport placeholder from \"../../assets/placeholder.png\";\nimport CommonLoading from \"../loader/CommonLoading\";\n\nimport {\n  useBannerLoading,\n  useIsModeratorUpdated,\n} from \"../../hooks/useCommunityData\";\nimport { HiUserGroup, HiOutlineCheckBadge } from \"react-icons/hi2\";\n\nconst Rightbar = () => {\n  const [showLeaveModal, setShowLeaveModal] = useState(false);\n\n  const dispatch = useDispatch();\n  const { communityName } = useParams();\n\n  const toggleLeaveModal = useCallback(() => {\n    setShowLeaveModal((prevState) => !prevState);\n  }, []);\n\n  useEffect(() => {\n    dispatch(getCommunityAction(communityName));\n  }, [dispatch, communityName]);\n\n  const communityData = useSelector((state) => state.community?.communityData);\n\n  const isModeratorOfThisCommunity = useSelector(\n    (state) => state.auth?.isModeratorOfThisCommunity\n  );\n\n  const { name, description, members, rules, banner } = useMemo(\n    () => communityData || {},\n    [communityData]\n  );\n\n  const bannerLoaded = useBannerLoading(banner);\n  const isModeratorUpdated = useIsModeratorUpdated(isModeratorOfThisCommunity);\n\n  if (!communityData) {\n    return (\n      <div className=\"flex justify-center\">\n        <CommonLoading />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-md \">\n      <div className=\"flex flex-col \">\n        <h2 className=\"text-lg font-bold\">{name}</h2>\n        <div className=\"flex items-center gap-2 text-primary mb-4\">\n          <HiUserGroup />\n          <span className=\"mr-2\">\n            {members?.length || 0}{\" \"}\n            {members?.length === 1 ? \"member\" : \"members\"}\n          </span>\n        </div>\n      </div>\n\n      {bannerLoaded ? (\n        <img\n          src={banner}\n          alt=\"community banner\"\n          className=\"w-full h-40 rounded-md object-cover mb-4\"\n          onError={(e) => {\n            e.target.src = placeholder;\n          }}\n        />\n      ) : (\n        <img\n          src={placeholder}\n          alt=\"community banner placeholder\"\n          className=\"w-full h-40 rounded-md object-cover mb-4\"\n        />\n      )}\n\n      <h3>{description}</h3>\n\n      <div className=\"my-4\">\n        {isModeratorOfThisCommunity && (\n          <Link\n            to={`/community/${communityName}/moderator`}\n            className=\"px-4 bg-primary text-white shadow-md shadow-gray-50 text-sm py-1 rounded-md flex justify-center items-center w-full my-2 hover:bg-primary-600\"\n          >\n            Moderation Panel\n          </Link>\n        )}\n\n        {isModeratorUpdated && !isModeratorOfThisCommunity && (\n          <button\n            onClick={toggleLeaveModal}\n            className=\"px-4 shadow-md shadow-red-50 text-sm py-1 border border-red-400 hover:text-white hover:bg-red-400 text-red-400 rounded-md flex justify-center items-center w-full my-2\"\n          >\n            Leave Community\n          </button>\n        )}\n        {\n          <LeaveModal\n            show={showLeaveModal}\n            toggle={toggleLeaveModal}\n            communityName={communityName}\n          />\n        }\n      </div>\n      {rules && rules.length > 0 && (\n        <div className=\"text-slate-900 mb-4\">\n          <span className=\"font-bold\">Community Guidelines:</span>\n          <ul className=\"flex flex-col gap-2 \">\n            {rules.map((rule) => (\n              <li key={rule._id} className=\"flex items-start gap-2 \">\n                <HiOutlineCheckBadge className=\"text-lg flex-shrink-0 mt-1\" />\n                {rule.rule}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Rightbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}