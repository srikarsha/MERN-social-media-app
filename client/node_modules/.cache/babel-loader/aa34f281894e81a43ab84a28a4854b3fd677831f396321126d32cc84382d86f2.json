{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,memo}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{getUserAction}from\"../../redux/actions/userActions\";import PostOnProfile from\"../post/PostOnProfile\";import OwnProfileCard from\"./OwnProfileCard\";import CommonLoading from\"../loader/CommonLoading\";import OwnInfoCard from\"./OwnInfoCard\";import NoPost from\"../../assets/nopost.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserProfile=function UserProfile(_ref){var _postToShow;var userData=_ref.userData;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var user=useSelector(function(state){var _state$user;return(_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.user;});var posts=user===null||user===void 0?void 0:user.posts;useEffect(function(){setLoading(true);var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(getUserAction(userData._id));case 2:case\"end\":return _context.stop();}},_callee);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser().then(function(){return setLoading(false);});},[dispatch,userData._id]);var MemoizedPostOnProfile=/*#__PURE__*/memo(PostOnProfile);var postToShow;postToShow=posts===null||posts===void 0?void 0:posts.map(function(post){return/*#__PURE__*/_jsx(MemoizedPostOnProfile,{post:post},post._id);});return/*#__PURE__*/_jsx(_Fragment,{children:loading||!user||!posts?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsx(CommonLoading,{})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OwnProfileCard,{user:user}),/*#__PURE__*/_jsx(OwnInfoCard,{user:user}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-center mb-4 text-gray-700 p-3 border-b\",children:\"Your most recent posts\"}),((_postToShow=postToShow)===null||_postToShow===void 0?void 0:_postToShow.length)===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-700 flex justify-center items-center flex-col\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold py-5 text-gray-500\",children:\"You haven't posted anything yet\"}),/*#__PURE__*/_jsx(\"img\",{className:\"max-w-md rounded-full\",src:NoPost,alt:\"no post\"})]}):postToShow]})});};export default UserProfile;","map":{"version":3,"names":["useEffect","useState","memo","useSelector","useDispatch","getUserAction","PostOnProfile","OwnProfileCard","CommonLoading","OwnInfoCard","NoPost","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserProfile","_ref","_postToShow","userData","dispatch","_useState","_useState2","_slicedToArray","loading","setLoading","user","state","_state$user","posts","fetchUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","_id","stop","apply","arguments","then","MemoizedPostOnProfile","postToShow","map","post","children","className","length","src","alt"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/profile/UserProfile.jsx"],"sourcesContent":["import { useEffect, useState, memo } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getUserAction } from \"../../redux/actions/userActions\";\nimport PostOnProfile from \"../post/PostOnProfile\";\nimport OwnProfileCard from \"./OwnProfileCard\";\nimport CommonLoading from \"../loader/CommonLoading\";\nimport OwnInfoCard from \"./OwnInfoCard\";\nimport NoPost from \"../../assets/nopost.jpg\";\n\nconst UserProfile = ({ userData }) => {\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const user = useSelector((state) => state.user?.user);\n  const posts = user?.posts;\n\n  useEffect(() => {\n    setLoading(true);\n    const fetchUser = async () => {\n      await dispatch(getUserAction(userData._id));\n    };\n    fetchUser().then(() => setLoading(false));\n  }, [dispatch, userData._id]);\n\n  const MemoizedPostOnProfile = memo(PostOnProfile);\n\n  let postToShow;\n\n  postToShow = posts?.map((post) => (\n    <MemoizedPostOnProfile key={post._id} post={post} />\n  ));\n\n  return (\n    <>\n      {loading || !user || !posts ? (\n        <div className=\"flex justify-center items-center h-screen\">\n          <CommonLoading />\n        </div>\n      ) : (\n        <>\n          <OwnProfileCard user={user} />\n          <OwnInfoCard user={user} />\n\n          <h3 className=\"font-semibold text-center mb-4 text-gray-700 p-3 border-b\">\n            Your most recent posts\n          </h3>\n\n          {postToShow?.length === 0 ? (\n            <div className=\"text-center text-gray-700 flex justify-center items-center flex-col\">\n              <p className=\"font-semibold py-5 text-gray-500\">\n                You haven't posted anything yet\n              </p>\n              <img\n                className=\"max-w-md rounded-full\"\n                src={NoPost}\n                alt=\"no post\"\n              />\n            </div>\n          ) : (\n            postToShow\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}