{"ast":null,"code":"var _jsxFileName = \"E:\\\\SEM 4\\\\MERN\\\\end_sem_project\\\\SocialEcho-main\\\\client\\\\src\\\\pages\\\\Post.jsx\",\n  _s = $RefreshSig$();\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useEffect, lazy, useMemo, Suspense } from \"react\";\nimport { getPostAction, clearPostAction } from \"../redux/actions/postActions\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport CommonLoading from \"../components/loader/CommonLoading\";\nimport FallbackLoading from \"../components/loader/FallbackLoading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostView = /*#__PURE__*/lazy(_c = () => import(\"../components/post/PostView\"));\n_c2 = PostView;\nconst CommentSidebar = /*#__PURE__*/lazy(_c3 = () => import(\"../components/post/CommentSidebar\"));\n_c4 = CommentSidebar;\nconst Post = () => {\n  _s();\n  const {\n    postId\n  } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const userData = useSelector(state => {\n    var _state$auth;\n    return (_state$auth = state.auth) === null || _state$auth === void 0 ? void 0 : _state$auth.userData;\n  });\n  const joinedCommunities = useSelector(state => {\n    var _state$community, _state$community$join;\n    return (_state$community = state.community) === null || _state$community === void 0 ? void 0 : (_state$community$join = _state$community.joinedCommunities) === null || _state$community$join === void 0 ? void 0 : _state$community$join.map(({\n      _id\n    }) => _id);\n  });\n  useEffect(() => {\n    dispatch(getPostAction(postId));\n    return () => {\n      dispatch(clearPostAction());\n    };\n  }, [dispatch, postId]);\n  const post = useSelector(state => {\n    var _state$posts;\n    return (_state$posts = state.posts) === null || _state$posts === void 0 ? void 0 : _state$posts.post;\n  });\n  const isAuthorized = useMemo(() => {\n    return post && (joinedCommunities === null || joinedCommunities === void 0 ? void 0 : joinedCommunities.includes(post.community._id));\n  }, [post, joinedCommunities]);\n  useEffect(() => {\n    if (isAuthorized === false) {\n      navigate(\"/access-denied\");\n    }\n  }, [isAuthorized, navigate]);\n  if (!post || !joinedCommunities) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-span-3 flex justify-center items-center h-screen\",\n      children: /*#__PURE__*/_jsxDEV(CommonLoading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: /*#__PURE__*/_jsxDEV(FallbackLoading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 25\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(PostView, {\n      post: post,\n      userData: userData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CommentSidebar, {\n      comments: post.comments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(Post, \"QN5wVs+38EAPpSA+kgm33bEM26o=\", false, function () {\n  return [useParams, useDispatch, useNavigate, useSelector, useSelector, useSelector];\n});\n_c5 = Post;\nexport default Post;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"PostView$lazy\");\n$RefreshReg$(_c2, \"PostView\");\n$RefreshReg$(_c3, \"CommentSidebar$lazy\");\n$RefreshReg$(_c4, \"CommentSidebar\");\n$RefreshReg$(_c5, \"Post\");","map":{"version":3,"names":["useSelector","useDispatch","useEffect","lazy","useMemo","Suspense","getPostAction","clearPostAction","useParams","useNavigate","CommonLoading","FallbackLoading","jsxDEV","_jsxDEV","PostView","_c","_c2","CommentSidebar","_c3","_c4","Post","_s","postId","dispatch","navigate","userData","state","_state$auth","auth","joinedCommunities","_state$community","_state$community$join","community","map","_id","post","_state$posts","posts","isAuthorized","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","fallback","comments","_c5","$RefreshReg$"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/pages/Post.jsx"],"sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\nimport { useEffect, lazy, useMemo, Suspense } from \"react\";\nimport { getPostAction, clearPostAction } from \"../redux/actions/postActions\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport CommonLoading from \"../components/loader/CommonLoading\";\nimport FallbackLoading from \"../components/loader/FallbackLoading\";\n\nconst PostView = lazy(() => import(\"../components/post/PostView\"));\nconst CommentSidebar = lazy(() => import(\"../components/post/CommentSidebar\"));\n\nconst Post = () => {\n  const { postId } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const userData = useSelector((state) => state.auth?.userData);\n\n  const joinedCommunities = useSelector((state) =>\n    state.community?.joinedCommunities?.map(({ _id }) => _id)\n  );\n\n  useEffect(() => {\n    dispatch(getPostAction(postId));\n\n    return () => {\n      dispatch(clearPostAction());\n    };\n  }, [dispatch, postId]);\n\n  const post = useSelector((state) => state.posts?.post);\n\n  const isAuthorized = useMemo(() => {\n    return post && joinedCommunities?.includes(post.community._id);\n  }, [post, joinedCommunities]);\n\n  useEffect(() => {\n    if (isAuthorized === false) {\n      navigate(\"/access-denied\");\n    }\n  }, [isAuthorized, navigate]);\n\n  if (!post || !joinedCommunities) {\n    return (\n      <div className=\"col-span-3 flex justify-center items-center h-screen\">\n        <CommonLoading />\n      </div>\n    );\n  }\n  return (\n    <Suspense fallback={<FallbackLoading />}>\n      <PostView post={post} userData={userData} />\n      <CommentSidebar comments={post.comments} />\n    </Suspense>\n  );\n};\n\nexport default Post;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}