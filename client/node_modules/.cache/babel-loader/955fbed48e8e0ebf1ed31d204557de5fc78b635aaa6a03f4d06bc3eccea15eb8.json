{"ast":null,"code":"import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useMemo,useCallback}from\"react\";import{Link,useParams}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import LeaveModal from\"../modals/LeaveModal\";import{getCommunityAction}from\"../../redux/actions/communityActions\";import placeholder from\"../../assets/placeholder.png\";import CommonLoading from\"../loader/CommonLoading\";import{useBannerLoading,useIsModeratorUpdated}from\"../../hooks/useCommunityData\";import{HiUserGroup,HiOutlineCheckBadge}from\"react-icons/hi2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Rightbar=function Rightbar(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLeaveModal=_useState2[0],setShowLeaveModal=_useState2[1];var dispatch=useDispatch();var _useParams=useParams(),communityName=_useParams.communityName;var toggleLeaveModal=useCallback(function(){setShowLeaveModal(function(prevState){return!prevState;});},[]);useEffect(function(){dispatch(getCommunityAction(communityName));},[dispatch,communityName]);var communityData=useSelector(function(state){var _state$community;return(_state$community=state.community)===null||_state$community===void 0?void 0:_state$community.communityData;});var isModeratorOfThisCommunity=useSelector(function(state){var _state$auth;return(_state$auth=state.auth)===null||_state$auth===void 0?void 0:_state$auth.isModeratorOfThisCommunity;});var _useMemo=useMemo(function(){return communityData||{};},[communityData]),name=_useMemo.name,description=_useMemo.description,members=_useMemo.members,rules=_useMemo.rules,banner=_useMemo.banner;var bannerLoaded=useBannerLoading(banner);var isModeratorUpdated=useIsModeratorUpdated(isModeratorOfThisCommunity);if(!communityData){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(CommonLoading,{})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-md \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col \",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-primary mb-4\",children:[/*#__PURE__*/_jsx(HiUserGroup,{}),/*#__PURE__*/_jsxs(\"span\",{className:\"mr-2\",children:[(members===null||members===void 0?void 0:members.length)||0,\" \",(members===null||members===void 0?void 0:members.length)===1?\"member\":\"members\"]})]})]}),bannerLoaded?/*#__PURE__*/_jsx(\"img\",{src:banner,alt:\"community banner\",className:\"w-full h-40 rounded-md object-cover mb-4\",onError:function onError(e){e.target.src=placeholder;}}):/*#__PURE__*/_jsx(\"img\",{src:placeholder,alt:\"community banner placeholder\",className:\"w-full h-40 rounded-md object-cover mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{children:description}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[isModeratorOfThisCommunity&&/*#__PURE__*/_jsx(Link,{to:\"/community/\".concat(communityName,\"/moderator\"),className:\"px-4 bg-primary text-white shadow-md shadow-gray-50 text-sm py-1 rounded-md flex justify-center items-center w-full my-2 hover:bg-primary-600\",children:\"Moderation Panel\"}),isModeratorUpdated&&!isModeratorOfThisCommunity&&/*#__PURE__*/_jsx(\"button\",{onClick:toggleLeaveModal,className:\"px-4 shadow-md shadow-red-50 text-sm py-1 border border-red-400 hover:text-white hover:bg-red-400 text-red-400 rounded-md flex justify-center items-center w-full my-2\",children:\"Leave Community\"}),/*#__PURE__*/_jsx(LeaveModal,{show:showLeaveModal,toggle:toggleLeaveModal,communityName:communityName})]}),rules&&rules.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-900 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Community Guidelines:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"flex flex-col gap-2 \",children:rules.map(function(rule){return/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2 \",children:[/*#__PURE__*/_jsx(HiOutlineCheckBadge,{className:\"text-lg flex-shrink-0 mt-1\"}),rule.rule]},rule._id);})})]})]});};export default Rightbar;","map":{"version":3,"names":["useEffect","useState","useMemo","useCallback","Link","useParams","useDispatch","useSelector","LeaveModal","getCommunityAction","placeholder","CommonLoading","useBannerLoading","useIsModeratorUpdated","HiUserGroup","HiOutlineCheckBadge","jsx","_jsx","jsxs","_jsxs","Rightbar","_useState","_useState2","_slicedToArray","showLeaveModal","setShowLeaveModal","dispatch","_useParams","communityName","toggleLeaveModal","prevState","communityData","state","_state$community","community","isModeratorOfThisCommunity","_state$auth","auth","_useMemo","name","description","members","rules","banner","bannerLoaded","isModeratorUpdated","className","children","length","src","alt","onError","e","target","to","concat","onClick","show","toggle","map","rule","_id"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/community/Rightbar.jsx"],"sourcesContent":["import { useEffect, useState, useMemo, useCallback } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport LeaveModal from \"../modals/LeaveModal\";\nimport { getCommunityAction } from \"../../redux/actions/communityActions\";\nimport placeholder from \"../../assets/placeholder.png\";\nimport CommonLoading from \"../loader/CommonLoading\";\n\nimport {\n  useBannerLoading,\n  useIsModeratorUpdated,\n} from \"../../hooks/useCommunityData\";\nimport { HiUserGroup, HiOutlineCheckBadge } from \"react-icons/hi2\";\n\nconst Rightbar = () => {\n  const [showLeaveModal, setShowLeaveModal] = useState(false);\n\n  const dispatch = useDispatch();\n  const { communityName } = useParams();\n\n  const toggleLeaveModal = useCallback(() => {\n    setShowLeaveModal((prevState) => !prevState);\n  }, []);\n\n  useEffect(() => {\n    dispatch(getCommunityAction(communityName));\n  }, [dispatch, communityName]);\n\n  const communityData = useSelector((state) => state.community?.communityData);\n\n  const isModeratorOfThisCommunity = useSelector(\n    (state) => state.auth?.isModeratorOfThisCommunity\n  );\n\n  const { name, description, members, rules, banner } = useMemo(\n    () => communityData || {},\n    [communityData]\n  );\n\n  const bannerLoaded = useBannerLoading(banner);\n  const isModeratorUpdated = useIsModeratorUpdated(isModeratorOfThisCommunity);\n\n  if (!communityData) {\n    return (\n      <div className=\"flex justify-center\">\n        <CommonLoading />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-md \">\n      <div className=\"flex flex-col \">\n        <h2 className=\"text-lg font-bold\">{name}</h2>\n        <div className=\"flex items-center gap-2 text-primary mb-4\">\n          <HiUserGroup />\n          <span className=\"mr-2\">\n            {members?.length || 0}{\" \"}\n            {members?.length === 1 ? \"member\" : \"members\"}\n          </span>\n        </div>\n      </div>\n\n      {bannerLoaded ? (\n        <img\n          src={banner}\n          alt=\"community banner\"\n          className=\"w-full h-40 rounded-md object-cover mb-4\"\n          onError={(e) => {\n            e.target.src = placeholder;\n          }}\n        />\n      ) : (\n        <img\n          src={placeholder}\n          alt=\"community banner placeholder\"\n          className=\"w-full h-40 rounded-md object-cover mb-4\"\n        />\n      )}\n\n      <h3>{description}</h3>\n\n      <div className=\"my-4\">\n        {isModeratorOfThisCommunity && (\n          <Link\n            to={`/community/${communityName}/moderator`}\n            className=\"px-4 bg-primary text-white shadow-md shadow-gray-50 text-sm py-1 rounded-md flex justify-center items-center w-full my-2 hover:bg-primary-600\"\n          >\n            Moderation Panel\n          </Link>\n        )}\n\n        {isModeratorUpdated && !isModeratorOfThisCommunity && (\n          <button\n            onClick={toggleLeaveModal}\n            className=\"px-4 shadow-md shadow-red-50 text-sm py-1 border border-red-400 hover:text-white hover:bg-red-400 text-red-400 rounded-md flex justify-center items-center w-full my-2\"\n          >\n            Leave Community\n          </button>\n        )}\n        {\n          <LeaveModal\n            show={showLeaveModal}\n            toggle={toggleLeaveModal}\n            communityName={communityName}\n          />\n        }\n      </div>\n      {rules && rules.length > 0 && (\n        <div className=\"text-slate-900 mb-4\">\n          <span className=\"font-bold\">Community Guidelines:</span>\n          <ul className=\"flex flex-col gap-2 \">\n            {rules.map((rule) => (\n              <li key={rule._id} className=\"flex items-start gap-2 \">\n                <HiOutlineCheckBadge className=\"text-lg flex-shrink-0 mt-1\" />\n                {rule.rule}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Rightbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}