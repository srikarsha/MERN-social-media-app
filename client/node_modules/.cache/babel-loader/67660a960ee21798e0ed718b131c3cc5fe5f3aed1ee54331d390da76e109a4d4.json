{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{getTrustedContextAuthDataAction,deleteContextAuthDataAction,getBlockedAuthContextDataAction,blockContextAuthDataAction}from\"../../redux/actions/authActions\";import LoadingSpinner from\"../loader/ButtonLoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TrustedDevicesLocations=function TrustedDevicesLocations(_ref){var trustedAuthContextData=_ref.trustedAuthContextData;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),deleteLoading=_useState2[0],setDeleteLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),blockLoading=_useState4[0],setBlockLoading=_useState4[1];var dispatch=useDispatch();var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(contextId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setDeleteLoading(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},contextId,true));});_context.next=3;return dispatch(deleteContextAuthDataAction(contextId));case 3:_context.next=5;return dispatch(getTrustedContextAuthDataAction());case 5:setDeleteLoading(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},contextId,false));});case 6:case\"end\":return _context.stop();}},_callee);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();var handleBlock=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(contextId){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setBlockLoading(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},contextId,true));});_context2.next=3;return dispatch(blockContextAuthDataAction(contextId));case 3:_context2.next=5;return dispatch(getTrustedContextAuthDataAction());case 5:_context2.next=7;return dispatch(getBlockedAuthContextDataAction());case 7:setBlockLoading(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},contextId,false));});case 8:case\"end\":return _context2.stop();}},_callee2);}));return function handleBlock(_x2){return _ref3.apply(this,arguments);};}();var trustedDevices=trustedAuthContextData===null||trustedAuthContextData===void 0?void 0:trustedAuthContextData.map(function(device){return{_id:device._id,device:device.device,deviceType:device.deviceType,ipAddress:device.ip,location:\"\".concat(device.city,\", \").concat(device.country),browser:device.browser,operatingSystem:device.os,time:device.time};});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto mt-12 p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Trusted Devices and Locations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 border-t border-gray-200 pt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"-my-5 divide-y divide-gray-200\",children:[trustedDevices.length===0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Not available\"}),trustedDevices.map(function(device){return/*#__PURE__*/_jsx(\"li\",{className:\"py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-900\",children:[device.device,\" \",device.deviceType,\" - \",device.time]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 text-sm text-gray-500\",children:[\"(\",device.ipAddress,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:device.location}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"\\u2022\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[device.browser,\" on \",device.operatingSystem]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:deleteLoading[device._id],onClick:function onClick(){return handleDelete(device._id);},type:\"button\",className:\"mx-3 inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",children:deleteLoading[device._id]?/*#__PURE__*/_jsx(LoadingSpinner,{loadingText:\"Removing...\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Remove\"})}),/*#__PURE__*/_jsx(\"button\",{disabled:blockLoading[device._id],onClick:function onClick(){return handleBlock(device._id);},type:\"button\",className:\"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-gray-400 hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300\",children:blockLoading[device._id]?/*#__PURE__*/_jsx(LoadingSpinner,{loadingText:\"Blocking...\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Block\"})})]})]})},device._id);})]})})})]});};export default TrustedDevicesLocations;","map":{"version":3,"names":["useState","useDispatch","getTrustedContextAuthDataAction","deleteContextAuthDataAction","getBlockedAuthContextDataAction","blockContextAuthDataAction","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","TrustedDevicesLocations","_ref","trustedAuthContextData","_useState","_useState2","_slicedToArray","deleteLoading","setDeleteLoading","_useState3","_useState4","blockLoading","setBlockLoading","dispatch","handleDelete","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","contextId","wrap","_callee$","_context","prev","next","prevState","_objectSpread","_defineProperty","stop","_x","apply","arguments","handleBlock","_ref3","_callee2","_callee2$","_context2","_x2","trustedDevices","map","device","_id","deviceType","ipAddress","ip","location","concat","city","country","browser","operatingSystem","os","time","className","children","length","disabled","onClick","type","loadingText"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/profile/TrustedDevicesLocations.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  getTrustedContextAuthDataAction,\n  deleteContextAuthDataAction,\n  getBlockedAuthContextDataAction,\n  blockContextAuthDataAction,\n} from \"../../redux/actions/authActions\";\nimport LoadingSpinner from \"../loader/ButtonLoadingSpinner\";\n\nconst TrustedDevicesLocations = ({ trustedAuthContextData }) => {\n  const [deleteLoading, setDeleteLoading] = useState({});\n  const [blockLoading, setBlockLoading] = useState({});\n  const dispatch = useDispatch();\n\n  const handleDelete = async (contextId) => {\n    setDeleteLoading((prevState) => ({\n      ...prevState,\n      [contextId]: true,\n    }));\n\n    await dispatch(deleteContextAuthDataAction(contextId));\n    await dispatch(getTrustedContextAuthDataAction());\n\n    setDeleteLoading((prevState) => ({\n      ...prevState,\n      [contextId]: false,\n    }));\n  };\n\n  const handleBlock = async (contextId) => {\n    setBlockLoading((prevState) => ({\n      ...prevState,\n      [contextId]: true,\n    }));\n\n    await dispatch(blockContextAuthDataAction(contextId));\n    await dispatch(getTrustedContextAuthDataAction());\n    await dispatch(getBlockedAuthContextDataAction());\n\n    setBlockLoading((prevState) => ({\n      ...prevState,\n      [contextId]: false,\n    }));\n  };\n\n  const trustedDevices = trustedAuthContextData?.map((device) => ({\n    _id: device._id,\n    device: device.device,\n    deviceType: device.deviceType,\n    ipAddress: device.ip,\n    location: `${device.city}, ${device.country}`,\n    browser: device.browser,\n    operatingSystem: device.os,\n    time: device.time,\n  }));\n\n  return (\n    <div className=\"max-w-3xl mx-auto mt-12 p-5\">\n      <h2 className=\"text-lg font-medium text-gray-900\">\n        Trusted Devices and Locations\n      </h2>\n      <div className=\"mt-6 border-t border-gray-200 pt-6\">\n        <div className=\"flow-root\">\n          <ul className=\"-my-5 divide-y divide-gray-200\">\n            {trustedDevices.length === 0 && (\n              <span className=\"text-sm font-medium text-gray-900\">\n                Not available\n              </span>\n            )}\n\n            {trustedDevices.map((device) => (\n              <li key={device._id} className=\"py-5\">\n                <div className=\"flex items-center justify-between space-x-4\">\n                  <div className=\"min-w-0 flex-1\">\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-900\">\n                        {device.device} {device.deviceType} - {device.time}\n                      </span>\n\n                      <span className=\"ml-1 text-sm text-gray-500\">\n                        ({device.ipAddress})\n                      </span>\n                    </div>\n                    <div className=\"mt-1 flex items-center space-x-4\">\n                      <span className=\"text-sm text-gray-500\">\n                        {device.location}\n                      </span>\n                      <span className=\"text-sm text-gray-500\">•</span>\n                      <span className=\"text-sm text-gray-500\">\n                        {device.browser} on {device.operatingSystem}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex-shrink-0\">\n                    <button\n                      disabled={deleteLoading[device._id]}\n                      onClick={() => handleDelete(device._id)}\n                      type=\"button\"\n                      className=\"mx-3 inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                    >\n                      {deleteLoading[device._id] ? (\n                        <LoadingSpinner loadingText={\"Removing...\"} />\n                      ) : (\n                        <span>Remove</span>\n                      )}\n                    </button>\n                    <button\n                      disabled={blockLoading[device._id]}\n                      onClick={() => handleBlock(device._id)}\n                      type=\"button\"\n                      className=\"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-gray-400 hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300\"\n                    >\n                      {blockLoading[device._id] ? (\n                        <LoadingSpinner loadingText={\"Blocking...\"} />\n                      ) : (\n                        <span>Block</span>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TrustedDevicesLocations;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}