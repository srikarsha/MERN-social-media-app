{"ast":null,"code":"import _regeneratorRuntime from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{getServicePreferencesAction,updateServicePreferencesAction}from\"../../redux/actions/adminActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Settings=function Settings(){var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isUpdating=_useState4[0],setIsUpdating=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSuccess=_useState6[0],setIsSuccess=_useState6[1];var servicePreferences=useSelector(function(state){var _state$admin;return(_state$admin=state.admin)===null||_state$admin===void 0?void 0:_state$admin.servicePreferences;});var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),usePerspectiveAPI=_useState8[0],setUsePerspectiveAPI=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),categoryFilteringServiceProvider=_useState10[0],setCategoryFilteringServiceProvider=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),categoryFilteringRequestTimeout=_useState12[0],setCategoryFilteringRequestTimeout=_useState12[1];useEffect(function(){dispatch(getServicePreferencesAction());},[dispatch]);useEffect(function(){if(servicePreferences){setUsePerspectiveAPI(servicePreferences.usePerspectiveAPI);setCategoryFilteringServiceProvider(servicePreferences.categoryFilteringServiceProvider);setCategoryFilteringRequestTimeout(servicePreferences.categoryFilteringRequestTimeout);setIsLoading(false);}},[servicePreferences]);var handleUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsUpdating(true);setIsSuccess(false);_context.prev=2;_context.next=5;return dispatch(updateServicePreferencesAction({usePerspectiveAPI:usePerspectiveAPI,categoryFilteringServiceProvider:categoryFilteringServiceProvider,categoryFilteringRequestTimeout:categoryFilteringRequestTimeout}));case 5:setIsSuccess(true);setTimeout(function(){setIsSuccess(false);},3000);case 7:_context.prev=7;setIsUpdating(false);return _context.finish(7);case 10:case\"end\":return _context.stop();}},_callee,null,[[2,,7,10]]);}));return function handleUpdate(){return _ref.apply(this,arguments);};}();if(isLoading||!servicePreferences){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 w-full border rounded-md bg-white mt-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold mb-4 border-b pb-2 text-center text-gray-700\",children:\"Service Preferences\"}),isSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-100 text-green-800 p-2 mb-4 rounded\",children:\"Service Preferences updated successfully!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Use Perspective API for content moderation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(\"input\",{className:\"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\",type:\"checkbox\",checked:usePerspectiveAPI,onChange:function onChange(e){return setUsePerspectiveAPI(e.target.checked);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Category filtering service provider\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 \",value:categoryFilteringServiceProvider,onChange:function onChange(e){return setCategoryFilteringServiceProvider(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a provider\"}),/*#__PURE__*/_jsx(\"option\",{value:\"TextRazor\",children:\"TextRazor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"InterfaceAPI\",children:\"InterfaceAPI\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ClassifierAPI\",children:\"ClassifierAPI\"}),/*#__PURE__*/_jsx(\"option\",{value:\"disabled\",children:\"Disabled\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Category filtering request timeout (ms)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(\"input\",{className:\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 \",type:\"number\",value:categoryFilteringRequestTimeout,min:0,max:500000,required:true,onChange:function onChange(e){setCategoryFilteringRequestTimeout(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50\",onClick:handleUpdate,disabled:isUpdating,children:isUpdating?\"Updating...\":\"Update\"})})]});};export default Settings;","map":{"version":3,"names":["useState","useEffect","useSelector","useDispatch","getServicePreferencesAction","updateServicePreferencesAction","jsx","_jsx","jsxs","_jsxs","Settings","dispatch","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","isUpdating","setIsUpdating","_useState5","_useState6","isSuccess","setIsSuccess","servicePreferences","state","_state$admin","admin","_useState7","_useState8","usePerspectiveAPI","setUsePerspectiveAPI","_useState9","_useState10","categoryFilteringServiceProvider","setCategoryFilteringServiceProvider","_useState11","_useState12","categoryFilteringRequestTimeout","setCategoryFilteringRequestTimeout","handleUpdate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","setTimeout","finish","stop","apply","arguments","children","className","type","checked","onChange","e","target","value","min","max","required","onClick","disabled"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/admin/Settings.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  getServicePreferencesAction,\n  updateServicePreferencesAction,\n} from \"../../redux/actions/adminActions\";\n\nconst Settings = () => {\n  const dispatch = useDispatch();\n  const [isLoading, setIsLoading] = useState(true);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const servicePreferences = useSelector(\n    (state) => state.admin?.servicePreferences\n  );\n  const [usePerspectiveAPI, setUsePerspectiveAPI] = useState(false);\n  const [\n    categoryFilteringServiceProvider,\n    setCategoryFilteringServiceProvider,\n  ] = useState(\"\");\n  const [categoryFilteringRequestTimeout, setCategoryFilteringRequestTimeout] =\n    useState(0);\n\n  useEffect(() => {\n    dispatch(getServicePreferencesAction());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (servicePreferences) {\n      setUsePerspectiveAPI(servicePreferences.usePerspectiveAPI);\n      setCategoryFilteringServiceProvider(\n        servicePreferences.categoryFilteringServiceProvider\n      );\n      setCategoryFilteringRequestTimeout(\n        servicePreferences.categoryFilteringRequestTimeout\n      );\n      setIsLoading(false);\n    }\n  }, [servicePreferences]);\n\n  const handleUpdate = async () => {\n    setIsUpdating(true);\n    setIsSuccess(false);\n    try {\n      await dispatch(\n        updateServicePreferencesAction({\n          usePerspectiveAPI,\n          categoryFilteringServiceProvider,\n          categoryFilteringRequestTimeout,\n        })\n      );\n      setIsSuccess(true);\n      setTimeout(() => {\n        setIsSuccess(false);\n      }, 3000);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (isLoading || !servicePreferences) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"p-5 w-full border rounded-md bg-white mt-3\">\n      <h2 className=\"font-semibold mb-4 border-b pb-2 text-center text-gray-700\">\n        Service Preferences\n      </h2>\n\n      {isSuccess && (\n        <div className=\"bg-green-100 text-green-800 p-2 mb-4 rounded\">\n          Service Preferences updated successfully!\n        </div>\n      )}\n\n      <div className=\"flex items-center mb-4\">\n        <div>Use Perspective API for content moderation</div>\n        <div className=\"ml-auto\">\n          <input\n            className=\"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\n            type=\"checkbox\"\n            checked={usePerspectiveAPI}\n            onChange={(e) => setUsePerspectiveAPI(e.target.checked)}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex items-center mb-4\">\n        <div>Category filtering service provider</div>\n        <div className=\"ml-auto\">\n          <select\n            className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 \"\n            value={categoryFilteringServiceProvider}\n            onChange={(e) =>\n              setCategoryFilteringServiceProvider(e.target.value)\n            }\n          >\n            <option value=\"\">Select a provider</option>\n            <option value=\"TextRazor\">TextRazor</option>\n            <option value=\"InterfaceAPI\">InterfaceAPI</option>\n            <option value=\"ClassifierAPI\">ClassifierAPI</option>\n            <option value=\"disabled\">Disabled</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"flex items-center mb-4\">\n        <div>Category filtering request timeout (ms)</div>\n        <div className=\"ml-auto\">\n          <input\n            className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 \"\n            type=\"number\"\n            value={categoryFilteringRequestTimeout}\n            min={0}\n            max={500000}\n            required\n            onChange={(e) => {\n              setCategoryFilteringRequestTimeout(e.target.value);\n            }}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          className=\"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50\"\n          onClick={handleUpdate}\n          disabled={isUpdating}\n        >\n          {isUpdating ? \"Updating...\" : \"Update\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}