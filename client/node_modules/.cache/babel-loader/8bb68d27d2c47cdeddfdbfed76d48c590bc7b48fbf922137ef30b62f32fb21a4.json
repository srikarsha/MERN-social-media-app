{"ast":null,"code":"import _slicedToArray from\"E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useSelector}from\"react-redux\";import{useNavigate,useLocation,Link}from\"react-router-dom\";import{PhotoProvider,PhotoView}from\"react-photo-view\";import{HiOutlineChatBubbleOvalLeft,HiOutlineArchiveBox}from\"react-icons/hi2\";import DeleteModal from\"../modals/DeleteModal\";import Like from\"./Like\";import\"react-photo-view/dist/react-photo-view.css\";import Tooltip from\"../shared/Tooltip\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(_ref){var post=_ref.post;var navigate=useNavigate();var location=useLocation();var userData=useSelector(function(state){var _state$auth;return(_state$auth=state.auth)===null||_state$auth===void 0?void 0:_state$auth.userData;});var content=post.content,fileUrl=post.fileUrl,fileType=post.fileType,user=post.user,community=post.community,createdAt=post.createdAt,comments=post.comments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var toggleModal=function toggleModal(value){setShowModal(value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded bg-white p-4 m-2 hover:shadow-lg duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-full overflow-hidden w-12 h-12 object-cover\",src:user.avatar,alt:\"user avatar\",loading:\"lazy\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[userData._id===user._id?/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"font-semibold text-lg capitalize\",children:user.name}):/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(user._id),className:\"font-semibold text-lg capitalize\",children:user.name}),/*#__PURE__*/_jsx(Link,{to:\"/community/\".concat(community.name),className:\"text-sm text-gray-500\",children:community.name})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:createdAt})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){navigate(\"/post/\".concat(post._id),{state:{from:location.pathname}});},className:\"my-2 cursor-pointer break-words\",children:content}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:fileUrl&&fileType===\"image\"?/*#__PURE__*/_jsx(PhotoProvider,{overlayRender:function overlayRender(){return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-10 text-white px-3 py-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs\",children:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs\",children:community.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs\",children:createdAt})]});},children:/*#__PURE__*/_jsx(PhotoView,{src:fileUrl,children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full aspect-w-1 aspect-h-1\",children:/*#__PURE__*/_jsx(\"img\",{src:fileUrl,alt:content,loading:\"lazy\",className:\"cursor-pointer object-cover rounded-md\"})})})}):fileUrl&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full aspect-w-16 aspect-h-9\",children:/*#__PURE__*/_jsx(\"video\",{className:\"block mx-auto rounded-md focus:outline-none\",src:fileUrl,controls:true})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(Like,{post:post}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center text-lg gap-1\",onClick:function onClick(){navigate(\"/post/\".concat(post._id),{state:{from:location.pathname}});},children:[/*#__PURE__*/_jsx(HiOutlineChatBubbleOvalLeft,{className:\"text-2xl\"}),comments.length]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:(userData===null||userData===void 0?void 0:userData._id)===post.user._id&&/*#__PURE__*/_jsx(Tooltip,{text:\"Delete post\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return toggleModal(true);},className:\"text-red-500 text-2xl\",children:/*#__PURE__*/_jsx(HiOutlineArchiveBox,{})})})})]}),showModal&&/*#__PURE__*/_jsx(DeleteModal,{showModal:showModal,postId:post._id,onClose:function onClose(){return toggleModal(false);},prevPath:location.pathname})]});};export default Post;","map":{"version":3,"names":["useState","useSelector","useNavigate","useLocation","Link","PhotoProvider","PhotoView","HiOutlineChatBubbleOvalLeft","HiOutlineArchiveBox","DeleteModal","Like","Tooltip","jsx","_jsx","jsxs","_jsxs","Post","_ref","post","navigate","location","userData","state","_state$auth","auth","content","fileUrl","fileType","user","community","createdAt","comments","_useState","_useState2","_slicedToArray","showModal","setShowModal","toggleModal","value","className","children","src","avatar","alt","loading","_id","to","name","concat","onClick","from","pathname","overlayRender","controls","length","text","postId","onClose","prevPath"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/components/post/Post.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport { PhotoProvider, PhotoView } from \"react-photo-view\";\nimport {\n  HiOutlineChatBubbleOvalLeft,\n  HiOutlineArchiveBox,\n} from \"react-icons/hi2\";\nimport DeleteModal from \"../modals/DeleteModal\";\nimport Like from \"./Like\";\nimport \"react-photo-view/dist/react-photo-view.css\";\nimport Tooltip from \"../shared/Tooltip\";\n\nconst Post = ({ post }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const userData = useSelector((state) => state.auth?.userData);\n\n  const { content, fileUrl, fileType, user, community, createdAt, comments } =\n    post;\n\n  const [showModal, setShowModal] = useState(false);\n  const toggleModal = (value) => {\n    setShowModal(value);\n  };\n\n  return (\n    <div className=\"border rounded bg-white p-4 m-2 hover:shadow-lg duration-300\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <img\n            className=\"rounded-full overflow-hidden w-12 h-12 object-cover\"\n            src={user.avatar}\n            alt=\"user avatar\"\n            loading=\"lazy\"\n          />\n          <div className=\"flex flex-col\">\n            {userData._id === user._id ? (\n              <Link to=\"/profile\" className=\"font-semibold text-lg capitalize\">\n                {user.name}\n              </Link>\n            ) : (\n              <Link\n                to={`/user/${user._id}`}\n                className=\"font-semibold text-lg capitalize\"\n              >\n                {user.name}\n              </Link>\n            )}\n            <Link\n              to={`/community/${community.name}`}\n              className=\"text-sm text-gray-500\"\n            >\n              {community.name}\n            </Link>\n          </div>\n        </div>\n        <p className=\"text-sm text-gray-500\">{createdAt}</p>\n      </div>\n      <div>\n        <p\n          onClick={() => {\n            navigate(`/post/${post._id}`, {\n              state: { from: location.pathname },\n            });\n          }}\n          className=\"my-2 cursor-pointer break-words\"\n        >\n          {content}\n        </p>\n        <div className=\"mt-4\">\n          {fileUrl && fileType === \"image\" ? (\n            <PhotoProvider\n              overlayRender={() => (\n                <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-10 text-white px-3 py-2\">\n                  <p className=\"text-xs\">{user.name}</p>\n                  <p className=\"text-xs\">{community.name}</p>\n                  <p className=\"text-xs\">{createdAt}</p>\n                </div>\n              )}\n            >\n              <PhotoView src={fileUrl}>\n                <div className=\"w-full aspect-w-1 aspect-h-1\">\n                  <img\n                    src={fileUrl}\n                    alt={content}\n                    loading=\"lazy\"\n                    className=\"cursor-pointer object-cover rounded-md\"\n                  />\n                </div>\n              </PhotoView>\n            </PhotoProvider>\n          ) : (\n            fileUrl && (\n              <div className=\"w-full aspect-w-16 aspect-h-9\">\n                <video\n                  className=\"block mx-auto rounded-md focus:outline-none\"\n                  src={fileUrl}\n                  controls\n                />\n              </div>\n            )\n          )}\n        </div>\n      </div>\n      <div className=\"flex items-center justify-between mt-4\">\n        <div className=\"flex items-center gap-4\">\n          <Like post={post} />\n\n          <button\n            className=\"flex items-center text-lg gap-1\"\n            onClick={() => {\n              navigate(`/post/${post._id}`, {\n                state: { from: location.pathname },\n              });\n            }}\n          >\n            <HiOutlineChatBubbleOvalLeft className=\"text-2xl\" />\n            {comments.length}\n          </button>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {userData?._id === post.user._id && (\n            <Tooltip text=\"Delete post\">\n              <button\n                onClick={() => toggleModal(true)}\n                className=\"text-red-500 text-2xl\"\n              >\n                <HiOutlineArchiveBox />\n              </button>\n            </Tooltip>\n          )}\n        </div>\n      </div>\n\n      {showModal && (\n        <DeleteModal\n          showModal={showModal}\n          postId={post._id}\n          onClose={() => toggleModal(false)}\n          prevPath={location.pathname}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Post;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}