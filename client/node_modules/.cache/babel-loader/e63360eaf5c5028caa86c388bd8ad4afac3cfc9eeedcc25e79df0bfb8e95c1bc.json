{"ast":null,"code":"import * as types from \"../constants/authConstants\";\nimport { GET_COMMUNITY_SUCCESS, GET_COMMUNITY_FAIL } from \"../constants/communityConstants\";\nconst initialState = {\n  userData: null,\n  refreshToken: null,\n  accessToken: null,\n  signInError: null,\n  signUpError: [],\n  successMessage: null,\n  isModeratorOfThisCommunity: false,\n  contextAuthData: null,\n  trustedAuthContextData: [],\n  blockedAuthContextData: [],\n  userPreferences: null,\n  contextAuthError: null\n};\nconst authReducer = (state = initialState, action) => {\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    case types.SET_ACCESS_TOKEN:\n      return {\n        ...state,\n        accessToken: payload ? payload : null\n      };\n    case types.SET_REFRESH_TOKEN:\n      return {\n        ...state,\n        refreshToken: payload ? payload : null\n      };\n    case types.SET_USER_DATA:\n      return {\n        ...state,\n        userData: payload ? payload : null\n      };\n    case types.SIGNUP_SUCCESS:\n      return {\n        ...state,\n        signInError: null,\n        signUpError: [],\n        successMessage: payload ? payload : null\n      };\n    case types.SIGNUP_FAIL:\n      return {\n        ...state,\n        successMessage: null,\n        signInError: null,\n        signUpError: payload ? payload : []\n      };\n    case types.SIGNIN_SUCCESS:\n      return {\n        ...state,\n        userData: payload ? payload.user : null,\n        accessToken: payload ? payload.accessToken : null,\n        refreshToken: payload ? payload.refreshToken : null,\n        signInError: null,\n        successMessage: payload ? payload : null\n      };\n    case types.SIGNIN_FAIL:\n      return {\n        ...state,\n        successMessage: null,\n        signUpError: [],\n        signInError: payload ? payload : null\n      };\n    case types.LOGOUT:\n      return {\n        ...state,\n        userData: null,\n        refreshToken: null,\n        accessToken: null,\n        signInError: null,\n        signUpError: [],\n        successMessage: null,\n        isModeratorOfThisCommunity: false\n      };\n    case types.REFRESH_TOKEN_SUCCESS:\n      return {\n        ...state,\n        accessToken: payload ? payload.accessToken : null,\n        refreshToken: payload ? payload.refreshToken : null\n      };\n    case types.REFRESH_TOKEN_FAIL:\n      return {\n        ...state,\n        userData: null,\n        refreshToken: null,\n        accessToken: null,\n        signUpError: [],\n        signInError: null,\n        successMessage: null,\n        isModeratorOfThisCommunity: false\n      };\n    case GET_COMMUNITY_SUCCESS:\n      const moderators = payload ? payload.moderators : [];\n      const isModeratorOfThisCommunity = moderators.some(moderator => {\n        var _state$userData;\n        return moderator === ((_state$userData = state.userData) === null || _state$userData === void 0 ? void 0 : _state$userData._id);\n      });\n      return {\n        ...state,\n        isModeratorOfThisCommunity\n      };\n    case GET_COMMUNITY_FAIL:\n      return {\n        ...state,\n        isModeratorOfThisCommunity: false\n      };\n    case types.GET_CONTEXT_AUTH_DATA_SUCCESS:\n      return {\n        ...state,\n        contextAuthData: payload ? payload : null,\n        contextAuthError: null\n      };\n    case types.GET_CONTEXT_AUTH_DATA_FAIL:\n      return {\n        ...state,\n        contextAuthData: null,\n        contextAuthError: payload ? payload : null\n      };\n    case types.GET_TRUSTED_AUTH_CONTEXT_DATA_SUCCESS:\n      return {\n        ...state,\n        trustedAuthContextData: payload ? payload : [],\n        contextAuthError: null\n      };\n    case types.GET_TRUSTED_AUTH_CONTEXT_DATA_FAIL:\n      return {\n        ...state,\n        trustedAuthContextData: [],\n        contextAuthError: payload ? payload : null\n      };\n    case types.GET_USER_PREFERENCES_SUCCESS:\n      return {\n        ...state,\n        userPreferences: payload ? payload : null,\n        contextAuthError: null\n      };\n    case types.GET_USER_PREFERENCES_FAIL:\n      return {\n        ...state,\n        userPreferences: null,\n        contextAuthError: payload ? payload : null\n      };\n    case types.GET_BLOCKED_AUTH_CONTEXT_DATA_SUCCESS:\n      return {\n        ...state,\n        blockedAuthContextData: payload ? payload : [],\n        contextAuthError: null\n      };\n    case types.GET_BLOCKED_AUTH_CONTEXT_DATA_FAIL:\n      return {\n        ...state,\n        blockedAuthContextData: [],\n        contextAuthError: payload ? payload : null\n      };\n    case types.DELETE_CONTEXT_AUTH_DATA_FAIL:\n    case types.UNBLOCK_CONTEXT_AUTH_DATA_FAIL:\n    case types.BLOCK_CONTEXT_AUTH_DATA_FAIL:\n      return {\n        ...state,\n        contextAuthError: payload ? payload : null\n      };\n    case types.CLEAR_MESSAGE:\n      return {\n        ...state,\n        successMessage: null,\n        signInError: null,\n        signUpError: []\n      };\n    default:\n      return state;\n  }\n};\nexport default authReducer;","map":{"version":3,"names":["types","GET_COMMUNITY_SUCCESS","GET_COMMUNITY_FAIL","initialState","userData","refreshToken","accessToken","signInError","signUpError","successMessage","isModeratorOfThisCommunity","contextAuthData","trustedAuthContextData","blockedAuthContextData","userPreferences","contextAuthError","authReducer","state","action","type","payload","SET_ACCESS_TOKEN","SET_REFRESH_TOKEN","SET_USER_DATA","SIGNUP_SUCCESS","SIGNUP_FAIL","SIGNIN_SUCCESS","user","SIGNIN_FAIL","LOGOUT","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAIL","moderators","some","moderator","_state$userData","_id","GET_CONTEXT_AUTH_DATA_SUCCESS","GET_CONTEXT_AUTH_DATA_FAIL","GET_TRUSTED_AUTH_CONTEXT_DATA_SUCCESS","GET_TRUSTED_AUTH_CONTEXT_DATA_FAIL","GET_USER_PREFERENCES_SUCCESS","GET_USER_PREFERENCES_FAIL","GET_BLOCKED_AUTH_CONTEXT_DATA_SUCCESS","GET_BLOCKED_AUTH_CONTEXT_DATA_FAIL","DELETE_CONTEXT_AUTH_DATA_FAIL","UNBLOCK_CONTEXT_AUTH_DATA_FAIL","BLOCK_CONTEXT_AUTH_DATA_FAIL","CLEAR_MESSAGE"],"sources":["E:/SEM 4/MERN/end_sem_project/SocialEcho-main/client/src/redux/reducers/auth.js"],"sourcesContent":["import * as types from \"../constants/authConstants\";\nimport {\n  GET_COMMUNITY_SUCCESS,\n  GET_COMMUNITY_FAIL,\n} from \"../constants/communityConstants\";\n\nconst initialState = {\n  userData: null,\n  refreshToken: null,\n  accessToken: null,\n  signInError: null,\n  signUpError: [],\n  successMessage: null,\n  isModeratorOfThisCommunity: false,\n  contextAuthData: null,\n  trustedAuthContextData: [],\n  blockedAuthContextData: [],\n  userPreferences: null,\n  contextAuthError: null,\n};\n\nconst authReducer = (state = initialState, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case types.SET_ACCESS_TOKEN:\n      return {\n        ...state,\n        accessToken: payload ? payload : null,\n      };\n    case types.SET_REFRESH_TOKEN:\n      return {\n        ...state,\n        refreshToken: payload ? payload : null,\n      };\n    case types.SET_USER_DATA:\n      return {\n        ...state,\n        userData: payload ? payload : null,\n      };\n\n    case types.SIGNUP_SUCCESS:\n      return {\n        ...state,\n        signInError: null,\n        signUpError: [],\n        successMessage: payload ? payload : null,\n      };\n\n    case types.SIGNUP_FAIL:\n      return {\n        ...state,\n        successMessage: null,\n        signInError: null,\n        signUpError: payload ? payload : [],\n      };\n\n    case types.SIGNIN_SUCCESS:\n      return {\n        ...state,\n        userData: payload ? payload.user : null,\n        accessToken: payload ? payload.accessToken : null,\n        refreshToken: payload ? payload.refreshToken : null,\n        signInError: null,\n        successMessage: payload ? payload : null,\n      };\n\n    case types.SIGNIN_FAIL:\n      return {\n        ...state,\n        successMessage: null,\n        signUpError: [],\n        signInError: payload ? payload : null,\n      };\n\n    case types.LOGOUT:\n      return {\n        ...state,\n        userData: null,\n        refreshToken: null,\n        accessToken: null,\n        signInError: null,\n        signUpError: [],\n        successMessage: null,\n        isModeratorOfThisCommunity: false,\n      };\n\n    case types.REFRESH_TOKEN_SUCCESS:\n      return {\n        ...state,\n        accessToken: payload ? payload.accessToken : null,\n        refreshToken: payload ? payload.refreshToken : null,\n      };\n\n    case types.REFRESH_TOKEN_FAIL:\n      return {\n        ...state,\n        userData: null,\n        refreshToken: null,\n        accessToken: null,\n        signUpError: [],\n        signInError: null,\n        successMessage: null,\n        isModeratorOfThisCommunity: false,\n      };\n\n    case GET_COMMUNITY_SUCCESS:\n      const moderators = payload ? payload.moderators : [];\n      const isModeratorOfThisCommunity = moderators.some(\n        (moderator) => moderator === state.userData?._id\n      );\n      return {\n        ...state,\n        isModeratorOfThisCommunity,\n      };\n\n    case GET_COMMUNITY_FAIL:\n      return {\n        ...state,\n        isModeratorOfThisCommunity: false,\n      };\n\n    case types.GET_CONTEXT_AUTH_DATA_SUCCESS:\n      return {\n        ...state,\n        contextAuthData: payload ? payload : null,\n        contextAuthError: null,\n      };\n\n    case types.GET_CONTEXT_AUTH_DATA_FAIL:\n      return {\n        ...state,\n        contextAuthData: null,\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.GET_TRUSTED_AUTH_CONTEXT_DATA_SUCCESS:\n      return {\n        ...state,\n        trustedAuthContextData: payload ? payload : [],\n        contextAuthError: null,\n      };\n\n    case types.GET_TRUSTED_AUTH_CONTEXT_DATA_FAIL:\n      return {\n        ...state,\n        trustedAuthContextData: [],\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.GET_USER_PREFERENCES_SUCCESS:\n      return {\n        ...state,\n        userPreferences: payload ? payload : null,\n        contextAuthError: null,\n      };\n\n    case types.GET_USER_PREFERENCES_FAIL:\n      return {\n        ...state,\n        userPreferences: null,\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.GET_BLOCKED_AUTH_CONTEXT_DATA_SUCCESS:\n      return {\n        ...state,\n        blockedAuthContextData: payload ? payload : [],\n        contextAuthError: null,\n      };\n\n    case types.GET_BLOCKED_AUTH_CONTEXT_DATA_FAIL:\n      return {\n        ...state,\n        blockedAuthContextData: [],\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.DELETE_CONTEXT_AUTH_DATA_FAIL:\n    case types.UNBLOCK_CONTEXT_AUTH_DATA_FAIL:\n    case types.BLOCK_CONTEXT_AUTH_DATA_FAIL:\n      return {\n        ...state,\n        contextAuthError: payload ? payload : null,\n      };\n\n    case types.CLEAR_MESSAGE:\n      return {\n        ...state,\n        successMessage: null,\n        signInError: null,\n        signUpError: [],\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}